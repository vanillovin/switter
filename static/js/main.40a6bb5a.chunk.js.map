{"version":3,"sources":["services/firebase/fbase.js","services/users.js","components/auth/AuthForm.jsx","routes/Auth.jsx","utils.js","hooks/useInput.js","components/sweet/SweetEdit.jsx","hooks/useToggle.js","components/sweet/SweetActionButtons.jsx","hooks/useModal.js","services/sweets.js","components/sweet/SweetNestedComments.jsx","contexts/UsersProfileContext.jsx","components/sweet/SweetComment.jsx","components/sweet/SweetComments.jsx","components/sweet/Sweet.jsx","components/sweet/SweetFactory.jsx","components/Loading.jsx","routes/Home.jsx","components/Navigation.jsx","components/profile/ProfileEdit.jsx","components/NotFoundPage.jsx","components/modal/ModalPortal.jsx","components/modal/Modal.jsx","contexts/ModalContext.jsx","components/profile/ProfileTimelineData.jsx","routes/Profile.jsx","routes/Message.jsx","routes/SweetDetail.jsx","components/Router.jsx","components/App.jsx","reportWebVitals.js","index.js"],"names":["authService","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","getAuth","dbService","getFirestore","storageService","getStorage","updateCurUserProfile","userObj","updateProfile","currentUser","fetchUsersProfileData","snapshot","error","onSnapshot","doc","updateUsersProfilePhoto","uid","url","usersRef","collection","updateDoc","updateUsersProfileData","defaultProfileURL","initialUserObj","email","photoURL","aboutMe","displayName","writtenSweets","commentedSweets","likesSweets","AuthForm","useState","password","loginInputs","setLoginInputs","setError","newAccount","setNewAccount","onChange","event","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","then","res","user","catch","err","console","log","signInWithEmailAndPassword","message","className","type","placeholder","required","onClick","prev","Auth","darkMode","onSocialClick","provider","GoogleAuthProvider","signInWithPopup","GithubAuthProvider","icon","faTwitter","color","size","style","marginBottom","faGoogle","marginLeft","faGithub","shareSns","sns","id","pageUrl","window","open","displayedAt","createdAt","seconds","Date","minutes","Math","floor","hours","days","weeks","months","years","useInput","initialValue","setValue","onChangeValue","e","onClearValue","val","SweetEdit","text","closeEdit","autoFocus","maxLength","useToggle","toggleRef","toggle","setToggle","clickToggleOutside","current","contains","useEffect","document","addEventListener","SweetActionButtons","likes","liked","comments","handleLikeSweet","handleAddComment","useRef","onToggleChange","title","length","ref","sweetId","navigator","clipboard","writeText","alert","useModal","modal","setModal","modalContent","setModalContent","handleModal","content","openModal","closeModal","fetchSweets","query","orderBy","fetchSweet","createSweet","sweetObj","addDoc","imageFileUploadAndDownload","attachment","fileRef","uuidv4","uploadString","uploadFile","getDownloadURL","profileImageFileUploadAndDownload","fileDataUrl","fileReference","uploadTask","deleteStorageFile","fileUrl","deleteObject","deleteSweet","sid","deleteDoc","likeSweet","arrayRemove","arrayUnion","updateSweet","addSweetComment","commentObj","updateSweetNestedComment","deleteSweetComment","cid","filter","comment","SweetNestedComments","nestedComments","isOwner","handleAddNestedComment","handleDeleteNestedComment","map","UsersProfileContext","createContext","UsersProfileProvider","children","loading","data","usersProfileData","setUsersProfileData","usersProfilePhoto","setUsersProfilePhoto","Provider","SweetComment","handleDeleteComment","useContext","profileData","faTimes","Set","has","newComments","pComment","lSweet","sort","b","nestedComment","commentId","now","dName","confirm","nComment","cSweet","SweetComments","onHandleAddComment","marginTop","Sweet","sweet","history","useHistory","editing","setEditing","addComment","setAddComment","creatorId","profilePhoto","goToSweetDetailPage","currentTarget","push","wSweet","alt","src","attachmentUrl","clearText","s","SweetFactory","setAttachment","onClearAttachment","onsubmit","htmlFor","faPlus","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","readAsDataURL","opacity","backgroundImage","Loading","initialSweets","Home","sweets","setSweets","docs","Navigation","onDarkMode","display","justifyContent","to","activeClassName","faHome","faUser","faEnvelope","faMoon","faEllipsisH","ProfileEdit","onCloseEdit","setFileDataUrl","newDisplayName","newAboutMe","onChangeAboutMe","handelSubmit","fileReader","undefined","onload","background","NotFoundPage","ModalPortal","modalElement","getElementById","reactDom","createPortal","Modal","el","ModalContext","ModalProvider","ProfileTimelineData","Profile","refreshUser","params","useParams","editProfile","setEditProfile","pathname","location","fileDownloadUrl","split","signOut","i","timeline","fontWeight","includes","exact","path","msgArr","Message","userName","setOpen","msg","setMsg","onOpen","alignItems","padding","marginRight","random","regex","initialSweet","SweetDetail","sweetData","setSweetData","topToggleRef","topToggle","onTopToggleChange","goBack","replace","AppRouter","isLoggedIn","from","App","init","setInit","setUserObj","setDarkMode","onAuthStateChanged","args","Boolean","body","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.40a6bb5a.chunk.js","sourcesContent":["// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from 'firebase/app';\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\nimport { getAuth } from 'firebase/auth';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\n\r\n// Your web app's Firebase configuration\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n};\r\n\r\n// Initialize Firebase\r\nconst firebaseApp = initializeApp(firebaseConfig);\r\nconst authService = getAuth();\r\nconst dbService = getFirestore();\r\nconst storageService = getStorage();\r\n\r\nexport { firebaseApp, authService, dbService, storageService };\r\n","import { updateProfile } from 'firebase/auth';\r\nimport { collection, doc, onSnapshot, updateDoc } from 'firebase/firestore';\r\nimport { authService, dbService } from 'services/firebase/fbase';\r\n\r\nexport const updateCurUserProfile = (userObj) => {\r\n  return updateProfile(authService.currentUser, userObj);\r\n};\r\n\r\nexport const updateAllUsersProfilePhoto = (obj) => {\r\n  const usersRef = collection(dbService, 'users');\r\n  return updateDoc(doc(usersRef, 'profilePhoto'), obj);\r\n};\r\n\r\nexport const fetchUsersProfilePhoto = (snapshot, error) => {\r\n  return onSnapshot(doc(dbService, 'users', 'profilePhoto'), snapshot, error);\r\n};\r\n\r\nexport const updateAllUsersProfileData = (obj) => {\r\n  const usersRef = collection(dbService, 'users');\r\n  return updateDoc(doc(usersRef, 'profileData'), obj);\r\n};\r\n\r\nexport const fetchUsersProfileData = (snapshot, error) => {\r\n  return onSnapshot(doc(dbService, 'users', 'profileData'), snapshot, error);\r\n};\r\n\r\nexport const updateUsersProfilePhoto = (uid, url) => {\r\n  const usersRef = collection(dbService, 'users');\r\n  return updateDoc(doc(usersRef, 'profilePhoto'), {\r\n    [uid]: url,\r\n  });\r\n};\r\n\r\nexport const updateUsersProfileData = (uid, userObj) => {\r\n  const usersRef = collection(dbService, 'users');\r\n  return updateDoc(doc(usersRef, 'profileData'), {\r\n    [uid]: userObj,\r\n  });\r\n};\r\n","import React, { useState } from 'react';\r\nimport { authService } from 'services/firebase/fbase';\r\nimport {\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n} from 'firebase/auth';\r\nimport { updateUsersProfileData, updateUsersProfilePhoto } from 'services/users';\r\n\r\nconst defaultProfileURL =\r\n  'https://firebasestorage.googleapis.com/v0/b/switter-b2db8.appspot.com/o/logo.png?alt=media&token=d636781d-a94b-4b3f-8b18-374cceacf61d';\r\n\r\nconst initialUserObj = (email, photoURL) => ({\r\n  email,\r\n  aboutMe: '',\r\n  displayName: '♥',\r\n  photoURL,\r\n  writtenSweets: [],\r\n  commentedSweets: [],\r\n  likesSweets: [],\r\n});\r\n\r\nconst AuthForm = () => {\r\n  const [loginInputs, setLoginInputs] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n  const { email, password } = loginInputs;\r\n  const [error, setError] = useState('');\r\n  const [newAccount, setNewAccount] = useState(true);\r\n\r\n  const onChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setLoginInputs({\r\n      ...loginInputs,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const onSubmit = async (event) => {\r\n    event.preventDefault();\r\n    try {\r\n      // let data;\r\n      if (newAccount) {\r\n        // create newAccount\r\n        createUserWithEmailAndPassword(authService, email, password).then((res) => {\r\n          const uid = res.user.uid;\r\n          updateUsersProfilePhoto(uid, defaultProfileURL).catch((err) => {\r\n            console.log('updateUsersProfilePhoto err', err);\r\n          });\r\n          updateUsersProfileData(uid, initialUserObj(email, defaultProfileURL)).catch(\r\n            (err) => console.log('updateUsersProfileData err', err)\r\n          );\r\n        });\r\n      } else {\r\n        // log in\r\n        await signInWithEmailAndPassword(authService, email, password);\r\n      }\r\n      // console.log('Auth data', data.user.uid);\r\n    } catch (error) {\r\n      console.log('AuthForm onSubmit error :', error, 'error.message :', error.message);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const toggleAccount = () => {\r\n    setNewAccount((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit} className=\"container\">\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          value={email}\r\n          onChange={onChange}\r\n          className=\"authInput\"\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={password}\r\n          onChange={onChange}\r\n          className=\"authInput\"\r\n        />\r\n        <input\r\n          type=\"submit\"\r\n          className=\"authInput authSubmit\"\r\n          value={newAccount ? '가입하기' : '로그인'}\r\n        />\r\n        {error && <span className=\"authError\">{error}</span>}\r\n      </form>\r\n      <span onClick={toggleAccount} className=\"authSwitch\">\r\n        {newAccount ? '로그인하기' : '이메일로 가입하기'}\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n","import React from 'react';\r\nimport { authService } from 'services/firebase/fbase';\r\nimport { GoogleAuthProvider, GithubAuthProvider, signInWithPopup } from 'firebase/auth';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTwitter, faGoogle, faGithub } from '@fortawesome/free-brands-svg-icons';\r\nimport AuthForm from 'components/auth/AuthForm';\r\n\r\nconst Auth = ({ darkMode }) => {\r\n  const onSocialClick = async ({ target: { name } }) => {\r\n    let provider;\r\n    try {\r\n      if (name === 'google') {\r\n        provider = new GoogleAuthProvider();\r\n        await signInWithPopup(authService, provider);\r\n        // const credential = GoogleAuthProvider.credentialFromResult(result);\r\n        // const token = credential.accessToken;\r\n      } else if (name === 'github') {\r\n        provider = new GithubAuthProvider();\r\n        await signInWithPopup(authService, provider);\r\n        // const credential = GithubAuthProvider.credentialFromResult(result);\r\n        // const token = credential.accessToken;\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={darkMode ? 'authContainer dark' : 'authContainer'}>\r\n      <FontAwesomeIcon\r\n        icon={faTwitter}\r\n        color={'#9775fa'}\r\n        size=\"3x\"\r\n        style={{ marginBottom: 30 }}\r\n      />\r\n      <AuthForm />\r\n      <div className=\"authBtns\">\r\n        <button onClick={onSocialClick} name=\"google\" className=\"authBtn\">\r\n          Google로 로그인{' '}\r\n          <FontAwesomeIcon icon={faGoogle} color={'#fff'} style={{ marginLeft: 2 }} />\r\n        </button>\r\n        <button onClick={onSocialClick} name=\"github\" className=\"authBtn\">\r\n          Github로 로그인{' '}\r\n          <FontAwesomeIcon icon={faGithub} color={'#fff'} style={{ marginLeft: 2 }} />\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Auth;\r\n","export const handleCopy = (sweetId) => {\r\n  navigator.clipboard.writeText(\r\n    `https://vanillovin.github.io/switter/#/sweet/${sweetId}`\r\n  );\r\n  alert('클립보드로 복사됐습니다');\r\n};\r\n\r\nexport const shareSns = (sns, id) => {\r\n  const title = 'Switter';\r\n  const pageUrl = 'https://vanillovin.github.io/switter';\r\n\r\n  if (sns === 'twitter') {\r\n    window.open(\r\n      `https://twitter.com/intent/tweet?text=${title}&url=${pageUrl}/%23/sweet/${id}`,\r\n      'popup제목',\r\n      'width=500, height=400, scrollbars=yes'\r\n    );\r\n  } else if (sns === 'facebook') {\r\n    window.open(`http://www.facebook.com/sharer/sharer.php?u=${pageUrl}/%23/sweet/${id}`);\r\n  } else {\r\n    return;\r\n  }\r\n};\r\n\r\nexport function displayedAt(createdAt) {\r\n  const milliSeconds = new Date() - createdAt;\r\n  const seconds = milliSeconds / 1000;\r\n  if (seconds < 60) return `방금 전`;\r\n  const minutes = seconds / 60;\r\n  if (minutes < 60) return `${Math.floor(minutes)}분 전`;\r\n  const hours = minutes / 60;\r\n  if (hours < 24) return `${Math.floor(hours)}시간 전`;\r\n  const days = hours / 24;\r\n  if (days < 7) return `${Math.floor(days)}일 전`;\r\n  const weeks = days / 7;\r\n  if (weeks < 5) return `${Math.floor(weeks)}주 전`;\r\n  const months = days / 30;\r\n  if (months < 12) return `${Math.floor(months)}개월 전`;\r\n  const years = days / 365;\r\n  return `${Math.floor(years)}년 전`;\r\n}\r\n\r\n// export const getCreatedAt = () => {\r\n//   const month = new Date(sweetObj.createdAt).getMonth() + 1;\r\n//   const date = new Date(sweetObj.createdAt).getDate();\r\n//   const hour = new Date(sweetObj.createdAt).getHours();\r\n//   const min = new Date(sweetObj.createdAt).getMinutes();\r\n//   return `${displayedAt(sweetObj.createdAt)}`;\r\n// };\r\n","import { useState } from 'react';\r\n\r\nfunction useInput(initialValue = '') {\r\n  const [value, setValue] = useState(initialValue);\r\n  const onChangeValue = (e) => setValue(e.target.value);\r\n  const onClearValue = () => setValue('');\r\n  return { value, setValue: (val) => setValue(val), onChangeValue, onClearValue };\r\n}\r\n\r\nexport default useInput;\r\n","import React from 'react';\r\nimport useInput from 'hooks/useInput';\r\n\r\nfunction SweetEdit({ text, onSubmit, closeEdit }) {\r\n  const { value, onChangeValue } = useInput(text);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(value);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form className=\"container sweetEdit\" onSubmit={handleSubmit}>\r\n        <textarea\r\n          className=\"formInput\"\r\n          type=\"text\"\r\n          placeholder=\"스윗 수정하기\"\r\n          name=\"sweet\"\r\n          required\r\n          autoFocus\r\n          value={value}\r\n          onChange={onChangeValue}\r\n          maxLength={500}\r\n        />\r\n        <input type=\"submit\" value=\"스윗 업데이트\" className=\"formBtn\" />\r\n      </form>\r\n      <button onClick={closeEdit} className=\"formBtn cancelBtn\">\r\n        취소\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SweetEdit;\r\n","import { useEffect, useState } from 'react';\r\n\r\nfunction useToggle(toggleRef) {\r\n  const [toggle, setToggle] = useState(false);\r\n\r\n  const onToggleChange = () => setToggle((prev) => !prev);\r\n\r\n  const clickToggleOutside = (event) => {\r\n    if (!toggleRef.current?.contains(event.target)) {\r\n      setToggle(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (toggle) {\r\n      document.addEventListener('mousedown', clickToggleOutside);\r\n    }\r\n    return () => {\r\n      document.addEventListener('mousedown', clickToggleOutside);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [toggle]);\r\n\r\n  return [toggle, onToggleChange];\r\n}\r\n\r\nexport default useToggle;\r\n","import React, { useRef } from 'react';\r\nimport { AiFillHeart, AiOutlineHeart } from 'react-icons/ai';\r\nimport { FaComment, FaFacebook, FaHeart, FaShare, FaTwitter } from 'react-icons/fa';\r\nimport { FiLink } from 'react-icons/fi';\r\nimport useToggle from 'hooks/useToggle';\r\nimport { handleCopy, shareSns } from 'utils';\r\n\r\nfunction SweetActionButtons({\r\n  type,\r\n  id,\r\n  likes,\r\n  liked,\r\n  comments,\r\n  handleLikeSweet,\r\n  handleAddComment,\r\n}) {\r\n  const toggleRef = useRef();\r\n  const [toggle, onToggleChange] = useToggle(toggleRef);\r\n  return (\r\n    <div className={`bottom b${type}`}>\r\n      <button title=\"마음에 들어요\" onClick={handleLikeSweet}>\r\n        {type !== 'detail' ? (\r\n          <>\r\n            <FaHeart color={liked ? '#e05d5d' : ''} />\r\n            <span>{` ${likes.length}`}</span>\r\n          </>\r\n        ) : liked ? (\r\n          <AiFillHeart />\r\n        ) : (\r\n          <AiOutlineHeart />\r\n        )}\r\n      </button>\r\n      <button title=\"답글\" onClick={handleAddComment}>\r\n        <FaComment />\r\n        {type !== 'detail' && <span>{` ${comments.length}`}</span>}\r\n      </button>\r\n      <div className=\"toggles\" ref={toggleRef} title=\"공유하기\">\r\n        <button className=\"shareBtn\" onClick={onToggleChange}>\r\n          <FaShare />\r\n        </button>\r\n        {toggle && (\r\n          <div title=\"링크 복사하기\" className=\"buttons\">\r\n            <button onClick={() => handleCopy(id)}>\r\n              <FiLink /> 스윗 링크 복사하기\r\n            </button>\r\n            <button title=\"트위터에 공유하기\" onClick={() => shareSns('twitter', id)}>\r\n              <FaTwitter /> 트위터에 공유하기\r\n            </button>\r\n            <button title=\"페이스북에 공유하기\" onClick={() => shareSns('facebook', id)}>\r\n              <FaFacebook /> 페이스북에 공유하기\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SweetActionButtons;\r\n","import { useState } from 'react';\r\n\r\nconst useModal = () => {\r\n  const [modal, setModal] = useState(false);\r\n  const [modalContent, setModalContent] = useState('im modal content');\r\n  const handleModal = (content = false) => {\r\n    setModal((prev) => !prev);\r\n    if (content) setModalContent(content);\r\n  };\r\n  const closeModal = (content = false) => {\r\n    setModal(false);\r\n    if (content) setModalContent(content);\r\n  };\r\n  const openModal = (content = false) => {\r\n    setModal(true);\r\n    if (content) setModalContent(content);\r\n  };\r\n  return { modal, handleModal, openModal, closeModal, modalContent };\r\n};\r\n\r\nexport default useModal;\r\n","import {\r\n  addDoc,\r\n  arrayRemove,\r\n  arrayUnion,\r\n  collection,\r\n  deleteDoc,\r\n  doc,\r\n  getFirestore,\r\n  onSnapshot,\r\n  orderBy,\r\n  query,\r\n  updateDoc,\r\n} from 'firebase/firestore';\r\nimport { deleteObject, getDownloadURL, ref, uploadString } from 'firebase/storage';\r\nimport { dbService, storageService } from './firebase/fbase';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\nexport const fetchSweets = (snapshot, error) => {\r\n  // console.log('into fetch sweets');\r\n  return onSnapshot(\r\n    query(collection(getFirestore(), 'sweets'), orderBy('createdAt', 'desc')),\r\n    snapshot,\r\n    error\r\n  );\r\n};\r\n\r\nexport const fetchSweet = (id, snapshot, error) => {\r\n  return onSnapshot(doc(dbService, `sweets/${id}`), snapshot, error);\r\n};\r\n\r\nexport const createSweet = (sweetObj) => {\r\n  return addDoc(collection(dbService, 'sweets'), sweetObj);\r\n};\r\n\r\nexport const imageFileUploadAndDownload = async (uid, attachment) => {\r\n  try {\r\n    const fileRef = ref(storageService, `${uid}/${uuidv4()}`);\r\n    const uploadFile = await uploadString(fileRef, attachment, 'data_url');\r\n    return getDownloadURL(uploadFile.ref);\r\n  } catch (err) {\r\n    console.log('imageFileUploadAndDownload err', err);\r\n  }\r\n};\r\n\r\nexport const profileImageFileUploadAndDownload = async (uid, fileDataUrl) => {\r\n  try {\r\n    // 1. 파일이 업로드되서 저장될 버킷 내부의 래퍼런스 경로를 생성\r\n    const fileReference = ref(storageService, `${uid}/profileImage`);\r\n    // 2. 파일 데이터를 버킷 내부의 래퍼런스 경로로 전달 (파일을 버킷에 업로드)\r\n    const uploadTask = await uploadString(fileReference, fileDataUrl, 'data_url');\r\n    // 3. 버킷 내부의 래퍼런스에 있는 파일에 대한 DownloadURL을 받음\r\n    return await getDownloadURL(uploadTask.ref);\r\n  } catch (err) {\r\n    console.log('sweets - profileImageFileUploadAndDownload err', err);\r\n  }\r\n};\r\n\r\nexport const deleteStorageFile = (fileUrl) => {\r\n  return deleteObject(ref(storageService, fileUrl));\r\n};\r\n\r\nexport const deleteSweet = (sid) => {\r\n  return deleteDoc(doc(dbService, `sweets/${sid}`));\r\n};\r\n\r\nexport const likeSweet = (liked, sid, uid) => {\r\n  if (!liked) {\r\n    return updateDoc(doc(dbService, `sweets/${sid}`), {\r\n      likes: arrayUnion(uid),\r\n    });\r\n  } else {\r\n    return updateDoc(doc(dbService, `sweets/${sid}`), {\r\n      likes: arrayRemove(uid),\r\n    });\r\n  }\r\n};\r\n\r\nexport const updateSweet = (sid, text) => {\r\n  return updateDoc(doc(dbService, `sweets/${sid}`), { text });\r\n};\r\n\r\nexport const addSweetComment = (sid, commentObj) => {\r\n  return updateDoc(doc(dbService, `sweets/${sid}`), {\r\n    comments: arrayUnion(commentObj),\r\n  });\r\n};\r\n\r\nexport const updateSweetNestedComment = (sid, comments) => {\r\n  return updateDoc(doc(dbService, `sweets/${sid}`), {\r\n    comments,\r\n  });\r\n};\r\n\r\nexport const deleteSweetComment = (sweetObj, cid) => {\r\n  return updateDoc(doc(dbService, `sweets/${sweetObj.id}`), {\r\n    comments: sweetObj.comments.filter((comment) => comment.createdAt !== cid),\r\n  });\r\n};\r\n\r\n/*\r\nexport const createGroceryList = (userName) => {\r\n  const groceriesColRef = collection(db, 'groceryLists');\r\n  return addDoc(groceriesColRef, {\r\n    created: serverTimestamp(),\r\n    users: [{ name: userName }],\r\n  });\r\n};\r\n */\r\n","import React from 'react';\r\nimport { displayedAt } from 'utils';\r\nimport { FaTimes } from 'react-icons/fa';\r\nimport useInput from 'hooks/useInput';\r\n\r\nfunction SweetNestedComments({\r\n  nestedComments,\r\n  isOwner,\r\n  handleAddNestedComment,\r\n  handleDeleteNestedComment,\r\n}) {\r\n  const { value, onChangeValue, onClearValue } = useInput();\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleAddNestedComment(value, onClearValue);\r\n  };\r\n  return (\r\n    <div className=\"nestedCommentsContainer\">\r\n      <form className=\"commentForm\" onSubmit={onSubmit}>\r\n        <div className=\"commentInput__container\">\r\n          <input\r\n            className=\"commentInput__input\"\r\n            type=\"text\"\r\n            name=\"comment\"\r\n            value={value}\r\n            onChange={onChangeValue}\r\n            placeholder=\"댓글 달기\"\r\n            required\r\n          />\r\n          <input\r\n            className=\"commentInput__arrow\"\r\n            type=\"submit\"\r\n            value=\"&rarr;\"\r\n            onSubmit={onSubmit}\r\n          />\r\n        </div>\r\n      </form>\r\n      <div className=\"comments\">\r\n        {nestedComments?.map((comment) => (\r\n          <div key={comment.createdAt}>\r\n            <div className=\"hello\">\r\n              <div className=\"info\">\r\n                <span className=\"dname\">{comment.name || '♥'}</span>\r\n                <span className=\"mini\">{displayedAt(comment.createdAt)}</span>\r\n              </div>\r\n              {isOwner && (\r\n                <button\r\n                  className=\"delcommentBtn\"\r\n                  onClick={() => handleDeleteNestedComment(comment.createdAt)}\r\n                >\r\n                  <FaTimes />\r\n                </button>\r\n              )}\r\n            </div>\r\n            <div className=\"ctext\">{comment.text}</div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SweetNestedComments;\r\n","import React, { createContext, useEffect, useState } from 'react';\r\nimport { fetchUsersProfileData, fetchUsersProfilePhoto } from 'services/users';\r\n\r\nconst UsersProfileContext = createContext();\r\n\r\nlet UsersProfileProvider = ({ children }) => {\r\n  const [usersProfileData, setUsersProfileData] = useState({\r\n    loading: true,\r\n    data: null,\r\n    error: false,\r\n  });\r\n  const [usersProfilePhoto, setUsersProfilePhoto] = useState();\r\n\r\n  useEffect(() => {\r\n    fetchUsersProfilePhoto(\r\n      (doc) => {\r\n        // console.log('fetchUsersProfilePhoto res', doc.data());\r\n        setUsersProfilePhoto(doc.data());\r\n      },\r\n      (err) => {\r\n        console.log('fetchUsersProfilePhoto error', err);\r\n      }\r\n    );\r\n\r\n    fetchUsersProfileData(\r\n      (doc) => {\r\n        // console.log('fetchUsersProfileData res', doc.data());\r\n        setUsersProfileData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          data: doc.data(),\r\n        }));\r\n      },\r\n      (err) => {\r\n        console.log('fetchUsersProfileData error', err);\r\n        setUsersProfileData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          error: err,\r\n        }));\r\n      }\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <UsersProfileContext.Provider value={{ usersProfilePhoto, usersProfileData }}>\r\n      {children}\r\n    </UsersProfileContext.Provider>\r\n  );\r\n};\r\n\r\nexport { UsersProfileContext, UsersProfileProvider };\r\n","import React, { useContext } from 'react';\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nimport { displayedAt } from 'utils';\r\nimport SweetActionButtons from './SweetActionButtons';\r\nimport useModal from 'hooks/useModal';\r\nimport { updateSweetNestedComment } from 'services/sweets';\r\nimport { updateUsersProfileData } from 'services/users';\r\nimport SweetNestedComments from './SweetNestedComments';\r\nimport { UsersProfileContext } from 'contexts/UsersProfileContext';\r\n\r\nfunction SweetComment({ comments, comment, userObj, handleDeleteComment }) {\r\n  const { modal, handleModal } = useModal();\r\n  const isOwner = comment.uid === userObj.uid;\r\n  const {\r\n    usersProfileData: { data },\r\n  } = useContext(UsersProfileContext);\r\n  const profileData = data?.[userObj.uid];\r\n\r\n  const onHandleDeleteComment = () => handleDeleteComment(comment.createdAt);\r\n\r\n  const handleLikeComment = () => {\r\n    const liked = new Set(comment.likes).has(userObj.uid);\r\n    const newComments = comments.map((pComment) =>\r\n      pComment.createdAt === comment.createdAt\r\n        ? {\r\n            ...comment,\r\n            likes: liked\r\n              ? comment.likes.filter((uid) => uid !== userObj.uid)\r\n              : [...comment.likes, userObj.uid],\r\n          }\r\n        : pComment\r\n    );\r\n    updateSweetNestedComment(comment.id, newComments)\r\n      .then((res) => {\r\n        console.log('handleLikeComment res', res);\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          likesSweets: liked\r\n            ? profileData.likesSweets.filter((lSweet) => lSweet.id !== comment.id)\r\n            : [...profileData.likesSweets, comment],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateProfileLikesComments res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateProfileLikesComments err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('handleLikeComment err', err);\r\n      });\r\n  };\r\n\r\n  const handleAddNestedComment = (text, onClearValue) => {\r\n    const nestedComment = {\r\n      commentId: comment.createdAt,\r\n      id: comment.id,\r\n      createdAt: Date.now(),\r\n      uid: userObj.uid,\r\n      dName: userObj.displayName,\r\n      text,\r\n    };\r\n    const newComments = comments.map((pComment) =>\r\n      pComment.createdAt === comment.createdAt\r\n        ? { ...comment, nestedComments: [...comment.nestedComments, nestedComment] }\r\n        : pComment\r\n    );\r\n    updateSweetNestedComment(comment.id, newComments)\r\n      .then((res) => {\r\n        // console.log('updateSweetNestedComment res', res);\r\n        onClearValue();\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          commentedSweets: [...profileData.commentedSweets, nestedComment],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('updateSweetNestedComment err', err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteNestedComment = (id) => {\r\n    if (!window.confirm('답글을 삭제하시겠습니까?')) return;\r\n    const newComments = comments.map((pComment) =>\r\n      pComment.createdAt === comment.createdAt\r\n        ? {\r\n            ...comment,\r\n            nestedComments: comment.nestedComments.filter(\r\n              (nComment) => nComment.createdAt !== id\r\n            ),\r\n          }\r\n        : pComment\r\n    );\r\n    updateSweetNestedComment(comment.id, newComments)\r\n      .then((res) => {\r\n        // console.log('deleteSweetNestedComment res', res);\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          commentedSweets: profileData.commentedSweets.filter(\r\n            (cSweet) => cSweet.createdAt !== id\r\n          ),\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('deleteSweetNestedComment err', err);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"comment\" key={comment.createdAt}>\r\n      <div className=\"hello\">\r\n        <div className=\"info\">\r\n          <span className=\"dname\">{comment.name || '♥'}</span>\r\n          <span className=\"mini\">{displayedAt(comment.createdAt)}</span>\r\n        </div>\r\n        {isOwner && (\r\n          <button className=\"delcommentBtn\" onClick={onHandleDeleteComment}>\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </button>\r\n        )}\r\n      </div>\r\n      <div className=\"ctext\">{comment.text}</div>\r\n      <SweetActionButtons\r\n        type=\"comment\"\r\n        id=\"id\"\r\n        likes={comment.likes}\r\n        liked={new Set(comment.likes).has(userObj.uid)}\r\n        comments={comment.nestedComments}\r\n        handleLikeSweet={handleLikeComment}\r\n        handleAddComment={handleModal}\r\n      />\r\n\r\n      {modal && (\r\n        <SweetNestedComments\r\n          nestedComments={comment.nestedComments.sort(\r\n            (a, b) => b.createdAt - a.createdAt\r\n          )}\r\n          isOwner={isOwner}\r\n          handleAddNestedComment={handleAddNestedComment}\r\n          handleDeleteNestedComment={handleDeleteNestedComment}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SweetComment;\r\n","import React from 'react';\r\nimport useInput from 'hooks/useInput';\r\nimport SweetComment from './SweetComment';\r\n\r\nfunction SweetComments({ handleAddComment, handleDeleteComment, comments, userObj }) {\r\n  const { value, onChangeValue, onClearValue } = useInput();\r\n\r\n  const onHandleAddComment = (e) => {\r\n    e.preventDefault();\r\n    handleAddComment(value, onClearValue);\r\n  };\r\n\r\n  return (\r\n    <div className=\"comments-container\">\r\n      <div style={{ marginTop: 10 }}>\r\n        <form className=\"commentForm\" onSubmit={onHandleAddComment}>\r\n          <div className=\"commentInput__container\">\r\n            <input\r\n              className=\"commentInput__input\"\r\n              type=\"text\"\r\n              name=\"comment\"\r\n              value={value}\r\n              onChange={onChangeValue}\r\n              placeholder=\"댓글 달기\"\r\n              required\r\n            />\r\n            <input\r\n              className=\"commentInput__arrow\"\r\n              type=\"submit\"\r\n              value=\"&rarr;\"\r\n              onSubmit={onHandleAddComment}\r\n            />\r\n          </div>\r\n        </form>\r\n        <div className=\"comments\">\r\n          {comments?.map((comment) => (\r\n            <SweetComment\r\n              key={comment.createdAt}\r\n              comments={comments}\r\n              comment={comment}\r\n              userObj={userObj}\r\n              handleDeleteComment={handleDeleteComment}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SweetComments;\r\n","import React, { useContext, useState } from 'react';\r\nimport { FaPencilAlt, FaTrash } from 'react-icons/fa';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport { displayedAt } from 'utils';\r\nimport SweetEdit from './SweetEdit';\r\nimport SweetComments from './SweetComments';\r\nimport SweetActionButtons from './SweetActionButtons';\r\nimport {\r\n  addSweetComment,\r\n  deleteStorageFile,\r\n  deleteSweet,\r\n  deleteSweetComment,\r\n  likeSweet,\r\n  updateSweet,\r\n} from 'services/sweets';\r\nimport { updateUsersProfileData } from 'services/users';\r\nimport { UsersProfileContext } from 'contexts/UsersProfileContext';\r\n\r\nconst Sweet = ({ userObj, sweet, isOwner, darkMode }) => {\r\n  const history = useHistory();\r\n  const comments = sweet.comments.sort((a, b) => b.createdAt - a.createdAt);\r\n  const [editing, setEditing] = useState(false);\r\n  const [addComment, setAddComment] = useState(false);\r\n  const {\r\n    usersProfileData: { data },\r\n    usersProfilePhoto,\r\n  } = useContext(UsersProfileContext);\r\n  const profileData = data?.[sweet?.creatorId];\r\n  const profilePhoto = usersProfilePhoto?.[sweet?.creatorId];\r\n\r\n  const toggleEditing = () => setEditing((prev) => !prev);\r\n\r\n  const goToSweetDetailPage = (e) => {\r\n    if (e.target !== e.currentTarget) return;\r\n    // e.stopImmediatePropagation();\r\n    history.push(`/sweet/${sweet?.id}`);\r\n  };\r\n\r\n  const handleDeleteSweet = () => {\r\n    if (!window.confirm('스윗을 삭제하시겠습니까?')) return;\r\n    if (sweet.attachmentUrl !== '') {\r\n      deleteStorageFile(sweet.attachmentUrl).catch((err) => {\r\n        console.log('deleteStorageFile err', err);\r\n      });\r\n    }\r\n    deleteSweet(sweet.id)\r\n      .then((res) => {\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          likesSweets: profileData.likesSweets.filter((lSweet) => lSweet.id !== sweet.id),\r\n          commentedSweets: profileData.commentedSweets.filter(\r\n            (cSweet) => cSweet.id !== sweet.id\r\n          ),\r\n          writtenSweets: profileData.writtenSweets.filter(\r\n            (wSweet) => wSweet.id !== sweet.id\r\n          ),\r\n        }).catch((err) => {\r\n          console.log('updateUsersProfileData delComment err', err);\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log('deleteSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleLikeSweet = () => {\r\n    const liked = new Set(sweet.likes).has(userObj.uid);\r\n    likeSweet(liked, sweet.id, userObj.uid)\r\n      .then((res) => {\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          likesSweets: liked\r\n            ? profileData.likesSweets.filter((lSweet) => lSweet.id !== sweet.id)\r\n            : [...profileData.likesSweets, sweet],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateProfileLikesSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateProfileLikesSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('likeSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleUpdateSweet = (text) => {\r\n    // const sweetData = getState().sweetsReducer.sweets.data.find((sweet) => sweet.id === id);\r\n    // if (!sweetData.id) return;\r\n    updateSweet(sweet.id, text)\r\n      .then((res) => {\r\n        setEditing(false);\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          likesSweets: profileData.likesSweets.map((lSweet) =>\r\n            lSweet.id === sweet.id ? { ...lSweet, text } : lSweet\r\n          ),\r\n          writtenSweets: profileData.writtenSweets.map((wSweet) =>\r\n            wSweet.id === sweet.id ? { ...wSweet, text } : wSweet\r\n          ),\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log('updateSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleAddComment = (text, clearText) => {\r\n    const commentObj = {\r\n      id: sweet.id,\r\n      uid: userObj.uid,\r\n      createdAt: Date.now(),\r\n      dName: userObj.displayName,\r\n      text,\r\n      likes: [],\r\n      nestedComments: [],\r\n    };\r\n    addSweetComment(sweet.id, commentObj)\r\n      .then((res) => {\r\n        clearText();\r\n        // console.log('addSweetComment res', res);\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          commentedSweets: [...profileData.commentedSweets, commentObj],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('addSweetComment err', err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteComment = (cid) => {\r\n    if (!window.confirm('댓글을 삭제하시겠습니까?')) return;\r\n    deleteSweetComment(sweet, cid)\r\n      .then((res) => {\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          commentedSweets: profileData.commentedSweets\r\n            .filter((cSweet) => cSweet.createdAt !== cid)\r\n            .filter((s) => s.commentId !== cid),\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets delete res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets delete err', err);\r\n          });\r\n      })\r\n      .catch((err) => console.log('deleteSweetComment err', err));\r\n  };\r\n\r\n  return (\r\n    <div className={darkMode ? 'sweet dark' : 'sweet'} onClick={goToSweetDetailPage}>\r\n      {editing ? (\r\n        <SweetEdit\r\n          text={sweet.text}\r\n          onSubmit={handleUpdateSweet}\r\n          closeEdit={() => setEditing(false)}\r\n        />\r\n      ) : (\r\n        <>\r\n          <div className=\"hello\">\r\n            <div\r\n              className=\"info\"\r\n              onClick={() => history.push(`/profile/${sweet.creatorId}`)}\r\n            >\r\n              <img\r\n                alt=\"profile\"\r\n                src={profilePhoto || `${process.env.PUBLIC_URL}/default-profile.png`}\r\n              />\r\n              <span className=\"dname\">{sweet.dName || '♥'}</span>\r\n              <span className=\"mini\">{displayedAt(sweet.createdAt)}</span>\r\n            </div>\r\n            {isOwner && (\r\n              <div className=\"sweet__actions\">\r\n                <span onClick={handleDeleteSweet}>\r\n                  <FaTrash />\r\n                </span>\r\n                <span onClick={toggleEditing}>\r\n                  <FaPencilAlt />\r\n                </span>\r\n              </div>\r\n            )}\r\n          </div>\r\n          <p className=\"sweet__text\" onClick={goToSweetDetailPage}>\r\n            {sweet.text}\r\n          </p>\r\n          {sweet.attachmentUrl && (\r\n            <img alt=\"img\" src={sweet.attachmentUrl} onClick={goToSweetDetailPage} />\r\n          )}\r\n          <>\r\n            <SweetActionButtons\r\n              type=\"sweet\"\r\n              id={sweet.id}\r\n              likes={sweet.likes}\r\n              liked={new Set(sweet.likes).has(userObj.uid)}\r\n              comments={sweet.comments}\r\n              handleLikeSweet={handleLikeSweet}\r\n              handleAddComment={() => setAddComment((prev) => !prev)}\r\n            />\r\n            {addComment && (\r\n              <SweetComments\r\n                handleAddComment={handleAddComment}\r\n                handleDeleteComment={handleDeleteComment}\r\n                comments={comments}\r\n                userObj={userObj}\r\n              />\r\n            )}\r\n          </>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Sweet;\r\n","import React, { useContext } from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faTimes } from '@fortawesome/free-solid-svg-icons';\r\n\r\nimport useInput from 'hooks/useInput';\r\nimport { updateUsersProfileData } from 'services/users';\r\nimport { createSweet, imageFileUploadAndDownload } from 'services/sweets';\r\nimport { UsersProfileContext } from 'contexts/UsersProfileContext';\r\n\r\nconst SweetFactory = ({ userObj, darkMode }) => {\r\n  const {\r\n    usersProfileData: { data },\r\n  } = useContext(UsersProfileContext);\r\n  const profileData = data?.[userObj.uid];\r\n  const { value: text, onChangeValue, onClearValue } = useInput('');\r\n  const {\r\n    value: attachment,\r\n    setValue: setAttachment,\r\n    onClearValue: onClearAttachment,\r\n  } = useInput('');\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (text === '') return;\r\n    let attachmentUrl = '';\r\n    if (attachment !== '') {\r\n      attachmentUrl = await imageFileUploadAndDownload(userObj.uid, attachment);\r\n    }\r\n\r\n    const sweetObj = {\r\n      text,\r\n      createdAt: Date.now(),\r\n      creatorId: userObj.uid,\r\n      attachmentUrl,\r\n      dName: userObj.displayName,\r\n      email: userObj.email,\r\n      likes: [],\r\n      comments: [],\r\n    };\r\n\r\n    createSweet(sweetObj)\r\n      .then((res) => {\r\n        // console.log('createSweet res', res.id);\r\n        onClearValue();\r\n        onClearAttachment();\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          writtenSweets: [...profileData.writtenSweets, { id: res.id, ...sweetObj }],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUserProfileArrData writtenSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUserProfileArrData writtenSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('createSweet err', err);\r\n      });\r\n  };\r\n\r\n  const onFileChange = (event) => {\r\n    const {\r\n      target: { files },\r\n    } = event;\r\n    const theFile = files[0];\r\n    const reader = new FileReader(); // fileReader API 파일 이름을 읽음\r\n    reader.onloadend = (finishedEvent) => {\r\n      const {\r\n        currentTarget: { result },\r\n      } = finishedEvent;\r\n      setAttachment(result);\r\n    };\r\n    reader.readAsDataURL(theFile);\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={onSubmit} className={darkMode ? 'factoryForm dark' : 'factoryForm'}>\r\n      <div className=\"factoryInput__container\">\r\n        <input\r\n          className=\"factoryInput__input\"\r\n          value={text}\r\n          onChange={onChangeValue}\r\n          type=\"text\"\r\n          placeholder=\"무슨 달콤한 생각을 하고 있나요?\"\r\n          maxLength={120}\r\n        />\r\n        <input\r\n          type=\"submit\"\r\n          value=\"&rarr;\"\r\n          className=\"factoryInput__arrow\"\r\n          onSubmit={onsubmit}\r\n        />\r\n      </div>\r\n      <label htmlFor=\"attach-file\" className=\"factoryInput__label\">\r\n        <span>사진 선택하기</span>\r\n        <FontAwesomeIcon icon={faPlus} />\r\n      </label>\r\n      <input\r\n        id=\"attach-file\"\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        onChange={onFileChange}\r\n        style={{\r\n          opacity: 0,\r\n        }}\r\n      />\r\n      {attachment && (\r\n        <div className=\"factoryForm__attachment\">\r\n          <img\r\n            alt=\"img\"\r\n            src={attachment}\r\n            style={{\r\n              backgroundImage: attachment,\r\n            }}\r\n          />\r\n          <div className=\"factoryForm__clear\" onClick={onClearAttachment}>\r\n            <span>제거하기</span>\r\n            <FontAwesomeIcon icon={faTimes} />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default SweetFactory;\r\n","import React from 'react';\r\n\r\nfunction Loading() {\r\n  return (\r\n    <div className=\"loading-component\">\r\n      <div className=\"loading\"></div>\r\n      <p>loading...</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Loading;\r\n","import React, { useEffect, useState } from 'react';\r\nimport Sweet from 'components/sweet/Sweet';\r\nimport SweetFactory from 'components/sweet/SweetFactory';\r\nimport { fetchSweets } from 'services/sweets';\r\nimport Loading from 'components/Loading';\r\n\r\nconst initialSweets = {\r\n  loading: true,\r\n  data: null,\r\n  error: null,\r\n};\r\n\r\nfunction Home({ userObj, darkMode }) {\r\n  const [sweets, setSweets] = useState(initialSweets);\r\n  const { loading, data, error } = sweets;\r\n\r\n  const clearSweets = () => setSweets(initialSweets);\r\n\r\n  useEffect(() => {\r\n    fetchSweets(\r\n      (snapshot) => {\r\n        const sweets = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setSweets((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          data: sweets,\r\n        }));\r\n      },\r\n      (err) => {\r\n        console.log('fetchSweets error', err);\r\n        setSweets((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          error: err,\r\n        }));\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      fetchSweets();\r\n      clearSweets();\r\n    };\r\n  }, []);\r\n\r\n  return !loading ? (\r\n    <div className={darkMode ? 'container dark' : 'container'}>\r\n      <SweetFactory userObj={userObj} darkMode={darkMode} />\r\n      <div className=\"sweet-container\" style={{ marginTop: 30 }}>\r\n        {data?.map((sweet) => (\r\n          <Sweet\r\n            key={sweet.id}\r\n            userObj={userObj}\r\n            sweet={sweet}\r\n            isOwner={sweet.creatorId === userObj.uid}\r\n            darkMode={darkMode}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <Loading />\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faTwitter } from '@fortawesome/free-brands-svg-icons';\r\nimport {\r\n  faEllipsisH,\r\n  faEnvelope,\r\n  faHome,\r\n  faMoon,\r\n  faUser,\r\n} from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst Navigation = ({ userObj, darkMode, onDarkMode }) => {\r\n  return (\r\n    <nav className={darkMode ? 'nav dark' : 'nav'}>\r\n      {/* <ul style={{ display: 'flex', justifyContent: 'center', marginTop: 50 }}> */}\r\n      <ul style={{ display: 'flex', justifyContent: 'center' }}>\r\n        <li className=\"logo\">\r\n          <NavLink to=\"/\" className=\"navlink\" activeClassName=\"\">\r\n            <FontAwesomeIcon icon={faTwitter} size=\"2x\" />\r\n            <span>♥</span>\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"home\">\r\n          <NavLink to=\"/\" className=\"navlink\" activeClassName=\"\">\r\n            <FontAwesomeIcon icon={faHome} size=\"2x\" />\r\n            <span>home</span>\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"profile\">\r\n          <NavLink className=\"navlink\" activeClassName=\"\" to={`/profile/${userObj.uid}`}>\r\n            <FontAwesomeIcon icon={faUser} size=\"2x\" />\r\n            <span>{userObj.displayName || '♥'}</span>\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"msg\">\r\n          <NavLink to=\"/msg\" className=\"navlink\" activeClassName=\"active\">\r\n            <FontAwesomeIcon icon={faEnvelope} size=\"2x\" />\r\n            <span>{'+1'}</span>\r\n          </NavLink>\r\n        </li>\r\n        <li className=\"dark navlink\" onClick={onDarkMode}>\r\n          <FontAwesomeIcon\r\n            icon={faMoon}\r\n            size=\"2x\"\r\n            color={darkMode ? '#e9c77b' : '#000000cc'}\r\n          />\r\n          <span>{darkMode ? 'light' : 'dark'}</span>\r\n        </li>\r\n        <li className=\"more navlink\">\r\n          <FontAwesomeIcon icon={faEllipsisH} size=\"2x\" />\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import useInput from 'hooks/useInput';\r\nimport React from 'react';\r\n\r\nfunction ProfileEdit({ photoURL, displayName, aboutMe, onSubmit, onCloseEdit }) {\r\n  const { value: fileDataUrl, setValue: setFileDataUrl } = useInput(photoURL);\r\n  const { value: newDisplayName, onChangeValue } = useInput(displayName);\r\n  const { value: newAboutMe, onChangeValue: onChangeAboutMe } = useInput(aboutMe);\r\n\r\n  const handelSubmit = (e) => {\r\n    e.preventDefault();\r\n    onSubmit(fileDataUrl, newDisplayName, newAboutMe);\r\n  };\r\n\r\n  const onFileChange = (event) => {\r\n    const {\r\n      target: { files },\r\n    } = event;\r\n    const uploadFile = files[0];\r\n    // const uploadFileName = uploadFile?.name;\r\n    const fileReader = new FileReader();\r\n    if (fileReader && uploadFile !== undefined && uploadFile !== null) {\r\n      fileReader.onload = (event) => {\r\n        const {\r\n          target: { result },\r\n        } = event;\r\n\r\n        setFileDataUrl(result);\r\n      };\r\n      fileReader.readAsDataURL(uploadFile);\r\n      // setFileName(`${uploadFileName}_${Date.now()}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      onSubmit={handelSubmit}\r\n      // className={darkMode ? 'profileForm dark' : 'profileForm'}\r\n    >\r\n      <div className=\"editProfileImage\">\r\n        <img\r\n          alt=\"profile\"\r\n          className=\"profileImage\"\r\n          src={fileDataUrl || `${process.env.PUBLIC_URL}/default-profile.png`}\r\n        />\r\n        <label htmlFor=\"attach-file\" className=\"\">\r\n          <span>사진 선택하기</span>\r\n        </label>\r\n        <input\r\n          id=\"attach-file\"\r\n          type=\"file\"\r\n          accept=\"image/*\"\r\n          onChange={onFileChange}\r\n          style={{ display: 'none', opacity: 0 }}\r\n        />\r\n        {fileDataUrl !== photoURL && (\r\n          <button className=\"profileImgclearBtn\" onClick={() => setFileDataUrl(photoURL)}>\r\n            <span>제거하기</span>\r\n          </button>\r\n        )}\r\n        {/* {attachment !== defaultProfileURL && (\r\n          <button\r\n            className=\"profileImgclearBtn\"\r\n            onClick={() => setAttachment(defaultProfileURL)}\r\n          >\r\n            <span>사진 삭제하기</span>\r\n          </button>\r\n        )} */}\r\n      </div>\r\n\r\n      <input\r\n        onChange={onChangeValue}\r\n        type=\"text\"\r\n        placeholder=\"Display name\"\r\n        value={newDisplayName || ''}\r\n        className=\"formInput\"\r\n      />\r\n      <input\r\n        onChange={onChangeAboutMe}\r\n        type=\"text\"\r\n        placeholder=\"About Me\"\r\n        value={newAboutMe || ''}\r\n        className=\"formInput aboutMeInput\"\r\n      />\r\n      <input\r\n        type=\"submit\"\r\n        className=\"formBtn updateProfileBtn\"\r\n        onClick={handelSubmit}\r\n        value=\"프로필 업데이트\"\r\n      />\r\n      <input\r\n        type=\"button\"\r\n        className=\"formBtn updateProfileBtn\"\r\n        onClick={onCloseEdit}\r\n        style={{ background: 'rgba(177,151,252,0.6)' }}\r\n        value=\"취소하기\"\r\n      />\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default ProfileEdit;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nfunction NotFoundPage({ message = '존재하지 않는 페이지입니다' }) {\r\n  const history = useHistory();\r\n  return (\r\n    <div className=\"notFound\">\r\n      <h1>{message}</h1>\r\n      <button onClick={() => history.push('/')}>홈으로 돌아가기</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NotFoundPage;\r\n","import reactDom from 'react-dom';\r\n\r\nconst ModalPortal = ({ children }) => {\r\n  const modalElement = document.getElementById('modal');\r\n  return reactDom.createPortal(children, modalElement);\r\n};\r\n\r\nexport default ModalPortal;\r\n","import { ModalContext } from 'contexts/ModalContext';\r\nimport React, { useContext, useRef } from 'react';\r\nimport ModalPortal from './ModalPortal';\r\n\r\nfunction Modal() {\r\n  const el = useRef();\r\n  const { modal, modalContent, closeModal } = useContext(ModalContext);\r\n  return modal ? (\r\n    <ModalPortal>\r\n      <div\r\n        className=\"modal-container\"\r\n        onClick={(e) => {\r\n          if (e.target === e.currentTarget) closeModal();\r\n        }}\r\n        ref={el}\r\n      >\r\n        <div className=\"modal\">\r\n          <h1>Ooops</h1>\r\n          <p>{modalContent}</p>\r\n          <button className=\"closeBtn\" onClick={() => closeModal()}>\r\n            닫기\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </ModalPortal>\r\n  ) : null;\r\n}\r\n\r\nexport default Modal;\r\n","import Modal from 'components/modal/Modal';\r\nimport useModal from 'hooks/useModal';\r\nimport React, { createContext } from 'react';\r\n\r\nconst ModalContext = createContext();\r\n\r\nlet ModalProvider = ({ children }) => {\r\n  const { modal, handleModal, openModal, closeModal, modalContent } = useModal();\r\n  return (\r\n    <ModalContext.Provider\r\n      value={{ modal, handleModal, openModal, closeModal, modalContent }}\r\n    >\r\n      <Modal />\r\n      {children}\r\n    </ModalContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ModalContext, ModalProvider };\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { displayedAt } from 'utils';\r\n\r\nfunction ProfileTimelineData({ sweets, profilePhoto }) {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <div className=\"timelineSweetcontainer\">\r\n      {sweets.length > 0 ? (\r\n        sweets\r\n          .sort((a, b) => b.createdAt - a.createdAt)\r\n          .map((sweet) => (\r\n            <div\r\n              className=\"sweet\"\r\n              key={sweet.createdAt}\r\n              onClick={(e) => {\r\n                if (e.target !== e.currentTarget) return;\r\n                history.push(`/sweet/${sweet?.id}`);\r\n              }}\r\n            >\r\n              <div className=\"hello\">\r\n                <div\r\n                  className=\"info\"\r\n                  onClick={(e) => {\r\n                    if (e.target !== e.currentTarget) return;\r\n                    history.push(`/profile/${sweet?.uid}`);\r\n                  }}\r\n                >\r\n                  <img alt=\"profile\" src={profilePhoto} />\r\n                  <span className=\"dname\">{sweet.dName || '♥'}</span>\r\n                  <span className=\"mini\">{displayedAt(sweet.createdAt)}</span>\r\n                </div>\r\n              </div>\r\n              <p\r\n                className=\"sweet__text\"\r\n                onClick={(e) => {\r\n                  if (e.target !== e.currentTarget) return;\r\n                  history.push(`/sweet/${sweet?.id}`);\r\n                }}\r\n              >\r\n                {sweet.text}\r\n              </p>\r\n              {sweet.attachmentUrl && (\r\n                <img\r\n                  alt=\"img\"\r\n                  src={sweet.attachmentUrl}\r\n                  onClick={(e) => {\r\n                    if (e.target !== e.currentTarget) return;\r\n                    history.push(`/sweet/${sweet?.id}`);\r\n                  }}\r\n                />\r\n              )}\r\n            </div>\r\n          ))\r\n      ) : (\r\n        <p className=\"nothing\">아직 아무것도 없습니다</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProfileTimelineData;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { Route, useHistory, useParams } from 'react-router-dom';\r\nimport { authService } from 'services/firebase/fbase';\r\nimport { signOut } from '@firebase/auth';\r\nimport Loading from 'components/Loading';\r\nimport ProfileEdit from 'components/profile/ProfileEdit';\r\nimport NotFoundPage from 'components/NotFoundPage';\r\nimport { UsersProfileContext } from 'contexts/UsersProfileContext';\r\nimport { profileImageFileUploadAndDownload } from 'services/sweets';\r\nimport {\r\n  fetchUsersProfileData,\r\n  updateCurUserProfile,\r\n  updateUsersProfileData,\r\n  updateUsersProfilePhoto,\r\n} from 'services/users';\r\nimport { ModalContext } from 'contexts/ModalContext';\r\nimport { Switch } from 'react-router-dom';\r\nimport { displayedAt } from 'utils';\r\nimport ProfileTimelineData from 'components/profile/ProfileTimelineData';\r\n\r\nconst Profile = ({ refreshUser, userObj, darkMode }) => {\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const { usersProfilePhoto } = useContext(UsersProfileContext);\r\n  const profilePhoto = usersProfilePhoto?.[params.uid];\r\n  const [usersProfileData, setUsersProfileData] = useState({\r\n    loading: true,\r\n    data: null,\r\n    error: false,\r\n  });\r\n  const { loading, data, error } = usersProfileData;\r\n  const profileData = data?.[params.uid];\r\n  const [editProfile, setEditProfile] = useState(false);\r\n  const isOwner = userObj.uid === params.uid;\r\n  const { handleModal } = useContext(ModalContext);\r\n  const pathname = history?.location.pathname;\r\n\r\n  useEffect(() => {\r\n    fetchUsersProfileData(\r\n      (doc) => {\r\n        // console.log('fetchUsersProfileData res', doc.data());\r\n        setUsersProfileData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          data: doc.data(),\r\n        }));\r\n      },\r\n      (err) => {\r\n        console.log('fetchUsersProfileData error', err);\r\n        setUsersProfileData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          error: err,\r\n        }));\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      fetchUsersProfileData();\r\n    };\r\n  }, [params?.uid]);\r\n\r\n  const handleLogOut = () => {\r\n    signOut(authService); // auth.signOut();\r\n    history.push('/');\r\n  };\r\n\r\n  const onSubmit = async (fileDataUrl, newDisplayName, newAboutMe) => {\r\n    if (\r\n      userObj.displayName === newDisplayName &&\r\n      userObj.photoURL === fileDataUrl &&\r\n      profileData.aboutMe === newAboutMe\r\n    ) {\r\n      setEditProfile(false);\r\n      return;\r\n    }\r\n\r\n    let fileDownloadUrl = profileData?.photoURL;\r\n    if (fileDataUrl !== profileData?.photoURL) {\r\n      fileDownloadUrl = await profileImageFileUploadAndDownload(userObj.uid, fileDataUrl);\r\n    }\r\n\r\n    updateCurUserProfile({\r\n      displayName: newDisplayName,\r\n      photoURL: fileDownloadUrl,\r\n    })\r\n      .then((res) => {\r\n        console.log('Profile update!', res);\r\n        setEditProfile(false);\r\n        refreshUser();\r\n        updateUsersProfilePhoto(userObj?.uid, fileDownloadUrl).catch((err) => {\r\n          console.log('Profile - updateUsersProfilePhoto err', err);\r\n        });\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          displayName: newDisplayName,\r\n          aboutMe: newAboutMe,\r\n          photoURL: fileDownloadUrl,\r\n        }).catch((err) => {\r\n          console.log('Profile - updateUsersProfileData err', err);\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        console.log('Profile update An error occurred', error);\r\n        handleModal('회원님의 프로필을 업데이트할 수 없습니다. 다시 시도해주세요');\r\n      });\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  if (!profileData) return <NotFoundPage message=\"존재하지 않는 사용자입니다\" />;\r\n\r\n  if (error) return <NotFoundPage message=\"사용자를 조회할 수 없습니다\" />;\r\n\r\n  return (\r\n    <div className={darkMode ? 'profileContainer dark' : 'profileContainer'}>\r\n      <div className=\"profileInfoContainer\">\r\n        {!editProfile ? (\r\n          <div className=\"profileInfo\">\r\n            <div>\r\n              <img\r\n                alt=\"profile\"\r\n                className=\"profileImage\"\r\n                src={\r\n                  profileData?.photoURL || `${process.env.PUBLIC_URL}/default-profile.png`\r\n                }\r\n              />\r\n              <div>\r\n                <h2 className=\"dname\">{profileData?.displayName}</h2>\r\n                <p className=\"email\">@{profileData?.email.split('@')[0]}</p>\r\n              </div>\r\n              <p className=\"aboutMe\">{profileData?.aboutMe}</p>\r\n            </div>\r\n\r\n            {isOwner && (\r\n              <div className=\"profileBtns\">\r\n                <button\r\n                  className=\"profileEditButton\"\r\n                  onClick={() => setEditProfile(true)}\r\n                >\r\n                  프로필 수정\r\n                </button>\r\n                <button className=\"logoutBtn\" onClick={handleLogOut}>\r\n                  로그아웃\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <ProfileEdit\r\n            photoURL={profileData?.photoURL}\r\n            displayName={userObj.displayName}\r\n            aboutMe={profileData?.aboutMe}\r\n            onSubmit={onSubmit}\r\n            onCloseEdit={() => setEditProfile(false)}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div>\r\n        <ul className=\"profileTimeline\">\r\n          {[\r\n            ['', '스윗'],\r\n            ['/comments', '댓글'],\r\n            ['/likes', '마음에 들어요'],\r\n          ].map(([timeline, text], i) => (\r\n            <li\r\n              key={i}\r\n              style={{\r\n                fontWeight: (\r\n                  i === 0 ? !pathname.split('/')[3] : pathname.includes(timeline)\r\n                )\r\n                  ? 'bold'\r\n                  : '',\r\n              }}\r\n              to={`/profile/${params.uid}${timeline}`}\r\n              onClick={() => history.push(`/profile/${params.uid}${timeline}`)}\r\n            >\r\n              {text}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        <Switch>\r\n          <Route exact path={`/profile/${params.uid}`}>\r\n            <ProfileTimelineData\r\n              sweets={profileData?.writtenSweets}\r\n              profilePhoto={profilePhoto}\r\n            />\r\n          </Route>\r\n          <Route exact path={`/profile/${params.uid}/comments`}>\r\n            <ProfileTimelineData\r\n              sweets={profileData?.commentedSweets}\r\n              profilePhoto={profilePhoto}\r\n            />\r\n          </Route>\r\n          <Route exact path={`/profile/${params.uid}/likes`}>\r\n            <ProfileTimelineData\r\n              sweets={profileData?.likesSweets}\r\n              profilePhoto={profilePhoto}\r\n            />\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import { faUser } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport React, { useState } from 'react';\r\n\r\nexport const msgArr = [\r\n  '누군가를 사랑하고자 한다면 너 자신을 먼저 사랑해야 해',\r\n  '앞이 보이지 않을 때는 지금 할 수 있는 일을 하면 돼',\r\n  '진정한 아름다움은 내면에 있어',\r\n  '그렇게 구경만 하다가는 네 인생이 너 없이 흘러가는 걸 구경하게 될걸',\r\n  '마음만을 가지고 있어서는 안 된다. 반드시 실천해야 한다',\r\n  '소심해질 시간 없어 용감하고 대담하게 해',\r\n  '기억해 너는 세상을 빛으로 가득 채울 수 있는 존재란 걸',\r\n  '사랑은 누군가를 나보다 먼저 두는 거야',\r\n  '용기를 내',\r\n  '행운을 빌어',\r\n  '너에게는 아직 꿈을 이루기 위한 충분한 시간이 있어',\r\n  '힘내. 인생은 한순간에 바뀌기도 하는 거니까',\r\n  '큰 희망이 큰 사람을 만든다',\r\n  '가끔은 옳은 길이 가장 쉬운 길이 아닐 때도 있지',\r\n  '절대로 고개를 떨구지 말라 고개를 치켜들고 세상을 똑바로 보라',\r\n  '시간은 아무도 기다려주지 않아',\r\n  '아름다움은 사라져 버리지만 마음에서 우러나는 것은 사라지지 않아. 유머, 친절함, 용기',\r\n  '중요한 건 겉모습이 아닌 마음이야',\r\n  '간절히 바라는 마음이 있어야 마법이 일어날 수 있어',\r\n  '역경을 이겨내고 핀 꽃이 가장 아름다운 꽃이란다',\r\n  '눈을 감지 말고 똑바로 봐. 두려움의 실체는 생각과 다를 수 있어',\r\n  '젊게 사는 건 절대 늦은 나이란 없어',\r\n  '널 억누르던 것들이 널 일으켜 줄 거야',\r\n  '행복이 네가 있는 곳에 있다는 걸 깨닫게 되는 날이 올 거야',\r\n  '누구든 무엇이든 될 수 있어',\r\n  '너의 가족이 널 얼마나 사랑하는지 잊지 마',\r\n  '익숙한 곳을 벗어나서 모험해',\r\n  '인생은 가능성으로 가득 차 있어',\r\n  '매일 행복할 순 없지만, 행복한 것들은 매일 있어',\r\n  '최고의 순간은 갑자기 찾아오는 거야',\r\n];\r\n\r\nconst Message = ({ userName }) => {\r\n  const [open, setOpen] = useState(true);\r\n  const [msg, setMsg] = useState(`${userName || 'hey'} 클릭해봐 :)`);\r\n\r\n  const onOpen = () => setOpen(!open);\r\n\r\n  const randomMsg = () => setMsg(msgArr[Math.floor(Math.random() * msgArr.length)]);\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"msg-container\">\r\n        <div className=\"msgh\">\r\n          <span>Message</span>\r\n        </div>\r\n\r\n        {open ? (\r\n          <div className=\"msgs\" onClick={onOpen}>\r\n            <div className=\"chat\">\r\n              <div style={{ fontWeight: 'bold', marginBottom: 12 }}>\r\n                <FontAwesomeIcon icon={faUser} /> {'익명'}\r\n              </div>\r\n              <span>{msg}</span>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"back\" onClick={onOpen}>\r\n              {open ? '' : '←'}\r\n            </div>\r\n            <div\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                padding: 20,\r\n              }}\r\n            >\r\n              <div style={{ marginRight: 10 }}>\r\n                <FontAwesomeIcon icon={faUser} color=\"black\" />\r\n              </div>\r\n              <div className=\"mymsg\" onClick={randomMsg}>\r\n                <span>{msg}</span>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Message;\r\n","import React, { useContext, useEffect, useRef, useState } from 'react';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { FaPencilAlt, FaTrash, FaEllipsisH } from 'react-icons/fa';\r\n\r\nimport useToggle from 'hooks/useToggle';\r\nimport SweetComments from '../components/sweet/SweetComments';\r\nimport SweetEdit from 'components/sweet/SweetEdit';\r\nimport {\r\n  addSweetComment,\r\n  deleteStorageFile,\r\n  deleteSweet,\r\n  deleteSweetComment,\r\n  fetchSweet,\r\n  likeSweet,\r\n  updateSweet,\r\n} from 'services/sweets';\r\nimport Loading from 'components/Loading';\r\nimport SweetActionButtons from 'components/sweet/SweetActionButtons';\r\nimport NotFoundPage from 'components/NotFoundPage';\r\nimport { UsersProfileContext } from 'contexts/UsersProfileContext';\r\nimport { updateUsersProfileData } from 'services/users';\r\n\r\nconst regex = /[\\s\\uFEFF\\xA0]+$/gi;\r\n\r\nconst initialSweet = {\r\n  loading: true,\r\n  data: null,\r\n  error: null,\r\n};\r\n\r\nfunction SweetDetail({ userObj, darkMode }) {\r\n  const [sweetData, setSweetData] = useState(initialSweet);\r\n  const { loading, data: sweet, error } = sweetData;\r\n  const topToggleRef = useRef();\r\n  const params = useParams();\r\n  const history = useHistory();\r\n  const [editing, setEditing] = useState(false);\r\n  const [topToggle, onTopToggleChange] = useToggle(topToggleRef);\r\n  const isOwner = sweet?.creatorId === userObj.uid;\r\n  const {\r\n    usersProfilePhoto,\r\n    usersProfileData: { data },\r\n  } = useContext(UsersProfileContext);\r\n  const profileData = data?.[userObj?.uid];\r\n\r\n  const clearSweet = () => setSweetData(initialSweet);\r\n\r\n  useEffect(() => {\r\n    fetchSweet(\r\n      params.id,\r\n      (doc) => {\r\n        // console.log(doc.data());\r\n        setSweetData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          data: doc.data(),\r\n        }));\r\n      },\r\n      (err) => {\r\n        console.log('fetchSweet error', err);\r\n        setSweetData((prev) => ({\r\n          ...prev,\r\n          loading: false,\r\n          error: err,\r\n        }));\r\n      }\r\n    );\r\n\r\n    return () => {\r\n      fetchSweet();\r\n      clearSweet();\r\n    };\r\n  }, [params.id]);\r\n\r\n  const handleDeleteSweet = () => {\r\n    if (!window.confirm('스윗을 삭제하시겠습니까?')) return;\r\n    if (sweet?.attachmentUrl !== '') {\r\n      deleteStorageFile(sweet.attachmentUrl).catch((err) => {\r\n        console.log('deleteStorageFile err', err);\r\n      });\r\n    }\r\n    deleteSweet(params?.id)\r\n      .then((res) => {\r\n        history.goBack();\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          likesSweets: profileData.likesSweets.filter(\r\n            (lSweet) => lSweet.id !== params?.id\r\n          ),\r\n          commentedSweets: profileData.commentedSweets.filter(\r\n            (cSweet) => cSweet.id !== params?.id\r\n          ),\r\n          writtenSweets: profileData.writtenSweets.filter(\r\n            (wSweet) => wSweet.id !== params?.id\r\n          ),\r\n        }).catch((err) => {\r\n          console.log('updateUsersProfileData delComment err', err);\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log('deleteSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleLikeSweet = () => {\r\n    const liked = new Set(sweet?.likes).has(userObj?.uid);\r\n    likeSweet(liked, params?.id, userObj?.uid)\r\n      .then((res) => {\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          likesSweets: liked\r\n            ? profileData.likesSweets.filter((lSweet) => lSweet.id !== sweet.id)\r\n            : [...profileData.likesSweets, sweet],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateProfileLikesSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateProfileLikesSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('likeSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleUpdateSweet = (text) => {\r\n    // const sweetData = getState().sweetsReducer.sweets.data.find((sweet) => sweet.id === id);\r\n    // if (!sweetData.id) return;\r\n    updateSweet(params?.id, text)\r\n      .then((res) => {\r\n        setEditing(false);\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          likesSweets: profileData.likesSweets.map((lSweet) =>\r\n            lSweet.id === params?.id ? { ...lSweet, text } : lSweet\r\n          ),\r\n          writtenSweets: profileData.writtenSweets.map((wSweet) =>\r\n            wSweet.id === params?.id ? { ...wSweet, text } : wSweet\r\n          ),\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log('updateSweet err', err);\r\n      });\r\n  };\r\n\r\n  const handleAddComment = (text, clearText) => {\r\n    const commentObj = {\r\n      id: params.id,\r\n      uid: userObj?.uid,\r\n      createdAt: Date.now(),\r\n      dName: userObj?.displayName,\r\n      text,\r\n      likes: [],\r\n      nestedComments: [],\r\n    };\r\n    addSweetComment(params.id, commentObj)\r\n      .then((res) => {\r\n        clearText();\r\n        // console.log('addSweetComment res', res);\r\n        updateUsersProfileData(userObj.uid, {\r\n          ...profileData,\r\n          commentedSweets: [...profileData.commentedSweets, commentObj],\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets err', err);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log('addSweetComment err', err);\r\n      });\r\n  };\r\n\r\n  const handleDeleteComment = (cid) => {\r\n    if (!window.confirm('댓글을 삭제하시겠습니까?')) return;\r\n    deleteSweetComment({ ...sweet, id: params?.id }, cid)\r\n      .then((res) => {\r\n        updateUsersProfileData(userObj?.uid, {\r\n          ...profileData,\r\n          commentedSweets: profileData.commentedSweets\r\n            .filter((cSweet) => cSweet.createdAt !== cid)\r\n            .filter((s) => s.commentId !== cid),\r\n        })\r\n          .then((res) => {\r\n            console.log('updateUsersCommentedSweets delete res', res);\r\n          })\r\n          .catch((err) => {\r\n            console.log('updateUsersCommentedSweets delete err', err);\r\n          });\r\n      })\r\n      .catch((err) => console.log('deleteSweetComment err', err));\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  if (!sweet) return <NotFoundPage message=\"존재하지 않는 스윗입니다\" />;\r\n\r\n  return (\r\n    <div className={darkMode ? 'sweetDetailContainer dark' : 'sweetDetailContainer'}>\r\n      <div className=\"sweetDetailTop\">\r\n        <button onClick={() => history.push('/')}>←</button>\r\n        스레드\r\n      </div>\r\n      <div className=\"sweetDetail\">\r\n        {editing ? (\r\n          <SweetEdit\r\n            text={sweet?.text}\r\n            onSubmit={handleUpdateSweet}\r\n            closeEdit={() => setEditing(false)}\r\n          />\r\n        ) : (\r\n          <>\r\n            <div className=\"sweetDetailTopInfo\">\r\n              <div\r\n                className=\"userInfo\"\r\n                onClick={() => history.push(`/profile/${sweet?.creatorId}`)}\r\n              >\r\n                <img\r\n                  alt=\"profile\"\r\n                  className=\"profile\"\r\n                  src={\r\n                    usersProfilePhoto[sweet.creatorId] ||\r\n                    `${process.env.PUBLIC_URL}/default-profile.png`\r\n                  }\r\n                />\r\n                <div className=\"text\">\r\n                  <span className=\"dname\">{sweet?.dName || '♥'}</span>\r\n                  <span className=\"email\">@{sweet?.email?.split('@')[0]}</span>\r\n                </div>\r\n              </div>\r\n              <div className=\"rightButtons\" ref={topToggleRef}>\r\n                {isOwner && (\r\n                  <>\r\n                    <button className=\"rToggleBtn\" onClick={onTopToggleChange}>\r\n                      <FaEllipsisH />\r\n                    </button>\r\n                    {topToggle && (\r\n                      <div className=\"buttons\">\r\n                        <button onClick={handleDeleteSweet}>\r\n                          <FaTrash /> 삭제하기\r\n                        </button>\r\n                        <button onClick={() => setEditing((prev) => !prev)}>\r\n                          <FaPencilAlt /> 수정하기\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <p className=\"sweetDetailContent\">{sweet?.text.replace(regex, '')}</p>\r\n            {sweet?.attachmentUrl && <img alt=\"img\" src={sweet?.attachmentUrl} />}\r\n          </>\r\n        )}\r\n        <div className=\"sweetDetailInfo\">\r\n          <div className=\"commentText\">\r\n            <span>{sweet?.comments?.length}</span> 답글\r\n          </div>\r\n          <div>\r\n            <span>{sweet?.likes?.length}</span> 마음에 들어요\r\n          </div>\r\n        </div>\r\n        <SweetActionButtons\r\n          type=\"detail\"\r\n          id={params.id}\r\n          likes={sweet.likes}\r\n          liked={sweet.likes.includes(userObj?.uid)}\r\n          comments={sweet.comments}\r\n          handleLikeSweet={handleLikeSweet}\r\n          handleAddComment={() => {}}\r\n        />\r\n        <SweetComments\r\n          handleAddComment={handleAddComment}\r\n          handleDeleteComment={handleDeleteComment}\r\n          comments={sweet?.comments.sort((a, b) => b.createdAt - a.createdAt)}\r\n          userObj={userObj}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SweetDetail;\r\n","import React from 'react';\r\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\r\nimport Auth from '../routes/Auth';\r\nimport Home from '../routes/Home';\r\nimport Navigation from 'components/Navigation';\r\nimport Profile from 'routes/Profile';\r\nimport Message from 'routes/Message';\r\nimport SweetDetail from '../routes/SweetDetail';\r\n\r\nconst AppRouter = ({ refreshUser, isLoggedIn, userObj, darkMode, onDarkMode }) => {\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <>\r\n          <div className={darkMode ? 'test dark' : 'test'}>\r\n            <div className={darkMode ? 'left dark' : 'left'}>\r\n              {isLoggedIn && (\r\n                <Navigation\r\n                  userObj={userObj}\r\n                  darkMode={darkMode}\r\n                  onDarkMode={onDarkMode}\r\n                />\r\n              )}\r\n            </div>\r\n            {isLoggedIn ? (\r\n              <div className={darkMode ? 'right dark' : 'right'}>\r\n                <Route exact path=\"/\">\r\n                  <Home userObj={userObj} darkMode={darkMode} onDarkMode={onDarkMode} />\r\n                </Route>\r\n                <Route exact path=\"/sweet/:id\">\r\n                  <SweetDetail userObj={userObj} darkMode={darkMode} />\r\n                </Route>\r\n                <Route exact path=\"/profile/:uid\">\r\n                  <Profile\r\n                    userObj={userObj}\r\n                    refreshUser={refreshUser}\r\n                    darkMode={darkMode}\r\n                  />\r\n                </Route>\r\n                <Route exact path=\"/profile/:uid/*\">\r\n                  <Profile\r\n                    userObj={userObj}\r\n                    refreshUser={refreshUser}\r\n                    darkMode={darkMode}\r\n                  />\r\n                </Route>\r\n                <Route exact path=\"/msg\">\r\n                  <Message userName={userObj.displayName} />\r\n                </Route>\r\n              </div>\r\n            ) : (\r\n              <>\r\n                <Route exact path=\"/\">\r\n                  <Auth darkMode={darkMode} />\r\n                </Route>\r\n                <Redirect from=\"*\" to=\"/\" />\r\n              </>\r\n            )}\r\n          </div>\r\n        </>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, { useState, useEffect } from 'react';\nimport AppRouter from './Router';\nimport { authService } from 'services/firebase/fbase';\nimport { onAuthStateChanged } from 'firebase/auth';\nimport { ModalProvider } from 'contexts/ModalContext';\nimport { UsersProfileProvider } from 'contexts/UsersProfileContext';\n\nfunction App() {\n  // console.log('유저의 로그인 여부', authService.currentUser);\n  const [init, setInit] = useState(false); // flase면 router 숨기기\n  // userObj의 제일 처음 출발점!\n  const [userObj, setUserObj] = useState(null);\n  const [darkMode, setDarkMode] = useState(false);\n\n  // 처음 시작할 때. 컴포넌트가 mount 될 때\n  useEffect(() => {\n    // 사용자의 로그인 상태의 변화를 관찰하는 관찰자 추가\n    onAuthStateChanged(authService, (user) => {\n      if (user) {\n        // console.log('App user', user);\n        setUserObj({\n          email: user.email,\n          displayName: user.displayName,\n          uid: user.uid,\n          photoURL: user.photoURL,\n          updateProfile: (args) => user.updateProfile(args),\n        });\n      } else {\n        // User is signed out\n        setUserObj(null);\n      }\n      setInit(true);\n    });\n  }, []);\n\n  // firebase의 정보를 가지고 react를 업데이트\n  const refreshUser = () => {\n    const user = authService.currentUser;\n    // console.log('refreshUser! user', user);\n    setUserObj({\n      email: user.email,\n      displayName: user.displayName,\n      uid: user.uid,\n      photoURL: user.photoURL,\n      updateProfile: (args) => user.updateProfile(args),\n    });\n  };\n\n  const onDarkMode = () => {\n    darkMode\n      ? (document.body.style = 'background-color: #fff8e5')\n      : (document.body.style = 'background-color: #193446');\n    setDarkMode(!darkMode);\n  };\n\n  console.log('App user', userObj);\n\n  return (\n    <UsersProfileProvider>\n      <ModalProvider>\n        {init ? (\n          <AppRouter\n            refreshUser={refreshUser}\n            isLoggedIn={Boolean(userObj)}\n            userObj={userObj}\n            darkMode={darkMode}\n            onDarkMode={onDarkMode}\n          />\n        ) : (\n          <div style={{ marginTop: 10 }}>Initializing....</div>\n        )}\n        {/* <footer>&copy; {new Date().getFullYear()} Switter</footer> */}\n      </ModalProvider>\n    </UsersProfileProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport './styles.css';\n// import { Provider } from 'react-redux';\n// import store from 'services/store';\n// import { applyMiddleware, createStore } from 'redux';\n// import rootReducer from 'modules';\n// import ReduxThunk from 'redux-thunk';\n// // import logger from 'redux-logger';\n// import { composeWithDevTools } from 'redux-devtools-extension';\n\n// logger랑 다른 미들웨어 사용 시 logger를 맨 뒤에 설정. logger도 함수로 간주해 프린트함\n// const store = createStore(rootReducer, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}