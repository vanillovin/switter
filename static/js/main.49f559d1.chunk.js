(this.webpackJsonpswitter=this.webpackJsonpswitter||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),o=n(43),s=n.n(o),r=n(13),i=n(32),l=n(19),d=n(1),u=n.n(d),j=n(2),b=n(54),m=n(26),f=n(14),O=n(33),h=(Object(b.a)({apiKey:"AIzaSyBOtqn8Rj-gLsv9CJm8F3dZKXyhey4x9Zw",authDomain:"switter-b2db8.firebaseapp.com",projectId:"switter-b2db8",storageBucket:"switter-b2db8.appspot.com",messagingSenderId:"132047093499",appId:"1:132047093499:web:315645c2fe687228ab3a5e"}),Object(m.d)()),v=Object(f.g)(),x=Object(O.c)(),p=n(20),g=n(39),w=n(6),k=n(12),N=function(e){return Object(m.h)(h.currentUser,e)},C=function(e,t){var n=Object(f.d)(v,"users");return Object(f.k)(Object(f.f)(n,"profilePhoto"),Object(w.a)({},e,t))},S=function(e,t){var n=Object(f.d)(v,"users");return Object(f.k)(Object(f.f)(n,"profileData"),Object(w.a)({},e,t))},y=n(3),M="https://firebasestorage.googleapis.com/v0/b/switter-b2db8.appspot.com/o/logo.png?alt=media&token=d636781d-a94b-4b3f-8b18-374cceacf61d",U=function(e,t){return{email:e,aboutMe:"",displayName:"\u2665",photoURL:t,commentedSweets:[],writtenSweets:[],likesSweets:[]}},D=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(r.a)(e,2),n=t[0],a=t[1],o=n.email,s=n.password,i=Object(c.useState)(""),l=Object(r.a)(i,2),d=l[0],b=l[1],f=Object(c.useState)(!0),O=Object(r.a)(f,2),v=O[0],x=O[1],p=function(e){var t=e.target,c=t.name,o=t.value;a(Object(k.a)(Object(k.a)({},n),{},Object(w.a)({},c,o)))},g=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!v){e.next=6;break}Object(m.c)(h,o,s).then((function(e){var t=e.user.uid;C(t,M).catch((function(e){console.log("updateUsersProfilePhoto err",e)})),S(t,U(o,M)).catch((function(e){return console.log("updateUsersProfileData err",e)}))})),e.next=8;break;case 6:return e.next=8,Object(m.f)(h,o,s);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("AuthForm onSubmit error :",e.t0,"error.message :",e.t0.message),b(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{onSubmit:g,className:"container",children:[Object(y.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:o,onChange:p,className:"authInput"}),Object(y.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:s,onChange:p,className:"authInput"}),Object(y.jsx)("input",{type:"submit",className:"authInput authSubmit",value:v?"\uac00\uc785\ud558\uae30":"\ub85c\uadf8\uc778"}),d&&Object(y.jsx)("span",{className:"authError",children:d})]}),Object(y.jsx)("span",{onClick:function(){x((function(e){return!e}))},className:"authSwitch",children:v?"\ub85c\uadf8\uc778\ud558\uae30":"\uc774\uba54\uc77c\ub85c \uac00\uc785\ud558\uae30"})]})},A=function(e){var t=e.darkMode,n=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,e.prev=1,"google"!==n){e.next=8;break}return c=new m.b,e.next=6,Object(m.g)(h,c);case 6:e.next=12;break;case 8:if("github"!==n){e.next=12;break}return c=new m.a,e.next=12,Object(m.g)(h,c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:t?"authContainer dark":"authContainer",children:[Object(y.jsx)(p.a,{icon:g.c,color:"#9775fa",size:"3x",style:{marginBottom:30}}),Object(y.jsx)(D,{}),Object(y.jsxs)("div",{className:"authBtns",children:[Object(y.jsxs)("button",{onClick:n,name:"google",className:"authBtn",children:["Google\ub85c \ub85c\uadf8\uc778"," ",Object(y.jsx)(p.a,{icon:g.b,color:"#fff",style:{marginLeft:2}})]}),Object(y.jsxs)("button",{onClick:n,name:"github",className:"authBtn",children:["Github\ub85c \ub85c\uadf8\uc778"," ",Object(y.jsx)(p.a,{icon:g.a,color:"#fff",style:{marginLeft:2}})]})]})]})},P=n(17),I=n(24),L=function(e,t){var n="https://vanillovin.github.io/switter";if("twitter"===e)window.open("https://twitter.com/intent/tweet?text=".concat("Switter","&url=").concat(n,"/%23/sweet/").concat(t),"popup\uc81c\ubaa9","width=500, height=400, scrollbars=yes");else{if("facebook"!==e)return;window.open("http://www.facebook.com/sharer/sharer.php?u=".concat(n,"/%23/sweet/").concat(t))}};function F(e){var t=(new Date-e)/1e3;if(t<60)return"\ubc29\uae08 \uc804";var n=t/60;if(n<60)return"".concat(Math.floor(n),"\ubd84 \uc804");var c=n/60;if(c<24)return"".concat(Math.floor(c),"\uc2dc\uac04 \uc804");var a=c/24;if(a<7)return"".concat(Math.floor(a),"\uc77c \uc804");var o=a/7;if(o<5)return"".concat(Math.floor(o),"\uc8fc \uc804");var s=a/30;if(s<12)return"".concat(Math.floor(s),"\uac1c\uc6d4 \uc804");var r=a/365;return"".concat(Math.floor(r),"\ub144 \uc804")}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),n=Object(r.a)(t,2),a=n[0],o=n[1],s=function(e){return o(e.target.value)},i=function(){return o("")};return{value:a,setValue:function(e){return o(e)},onChangeValue:s,onClearValue:i}};var B=function(e){var t=e.text,n=e.onSubmit,c=e.closeEdit,a=_(t),o=a.value,s=a.onChangeValue;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{className:"container sweetEdit",onSubmit:function(e){e.preventDefault(),n(o)},children:[Object(y.jsx)("textarea",{className:"formInput",type:"text",placeholder:"\uc2a4\uc717 \uc218\uc815\ud558\uae30",name:"sweet",required:!0,autoFocus:!0,value:o,onChange:s,maxLength:500}),Object(y.jsx)("input",{type:"submit",value:"\uc2a4\uc717 \uc5c5\ub370\uc774\ud2b8",className:"formBtn"})]}),Object(y.jsx)("button",{onClick:c,className:"formBtn cancelBtn",children:"\ucde8\uc18c"})]})},R=n(27),E=n(49),V=n(55);var T=function(e){var t=Object(c.useState)(!1),n=Object(r.a)(t,2),a=n[0],o=n[1],s=function(t){var n;(null===(n=e.current)||void 0===n?void 0:n.contains(t.target))||o(!1)};return Object(c.useEffect)((function(){return a&&document.addEventListener("mousedown",s),function(){document.addEventListener("mousedown",s)}}),[a]),[a,function(){return o((function(e){return!e}))}]};var z=function(e){var t=e.type,n=e.id,a=e.likes,o=e.liked,s=e.comments,i=e.handleLikeSweet,l=e.handleAddComment,d=Object(c.useRef)(),u=T(d),j=Object(r.a)(u,2),b=j[0],m=j[1];return Object(y.jsxs)("div",{className:"bottom b".concat(t),children:[Object(y.jsx)("button",{title:"\ub9c8\uc74c\uc5d0 \ub4e4\uc5b4\uc694",onClick:i,children:"detail"!==t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(I.d,{color:o?"#e05d5d":""}),Object(y.jsx)("span",{children:" ".concat(a.length)})]}):o?Object(y.jsx)(E.a,{}):Object(y.jsx)(E.b,{})}),Object(y.jsxs)("button",{title:"\ub2f5\uae00",onClick:l,children:[Object(y.jsx)(I.a,{}),"detail"!==t&&Object(y.jsx)("span",{children:" ".concat(s.length)})]}),Object(y.jsxs)("div",{className:"toggles",ref:d,title:"\uacf5\uc720\ud558\uae30",children:[Object(y.jsx)("button",{className:"shareBtn",onClick:m,children:Object(y.jsx)(I.f,{})}),b&&Object(y.jsxs)("div",{title:"\ub9c1\ud06c \ubcf5\uc0ac\ud558\uae30",className:"buttons",children:[Object(y.jsxs)("button",{onClick:function(){return e=n,navigator.clipboard.writeText("https://vanillovin.github.io/switter/#/sweet/".concat(e)),void alert("\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac\ub410\uc2b5\ub2c8\ub2e4");var e},children:[Object(y.jsx)(V.a,{})," \uc2a4\uc717 \ub9c1\ud06c \ubcf5\uc0ac\ud558\uae30"]}),Object(y.jsxs)("button",{title:"\ud2b8\uc704\ud130\uc5d0 \uacf5\uc720\ud558\uae30",onClick:function(){return L("twitter",n)},children:[Object(y.jsx)(I.i,{})," \ud2b8\uc704\ud130\uc5d0 \uacf5\uc720\ud558\uae30"]}),Object(y.jsxs)("button",{title:"\ud398\uc774\uc2a4\ubd81\uc5d0 \uacf5\uc720\ud558\uae30",onClick:function(){return L("facebook",n)},children:[Object(y.jsx)(I.c,{})," \ud398\uc774\uc2a4\ubd81\uc5d0 \uacf5\uc720\ud558\uae30"]})]})]})]})},q=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)("im modal content"),s=Object(r.a)(o,2),i=s[0],l=s[1];return{modal:n,handleModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a((function(e){return!e})),e&&l(e)},openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(!0),e&&l(e)},closeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(!1),e&&l(e)},modalContent:i}},J=n(74),G=function(e,t){return Object(f.h)(Object(f.j)(Object(f.d)(Object(f.g)(),"sweets"),Object(f.i)("createdAt","desc")),e,t)},K=function(e,t,n){return Object(f.h)(Object(f.f)(v,"sweets/".concat(e)),t,n)},Z=function(e){return Object(f.a)(Object(f.d)(v,"sweets"),e)},W=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(O.d)(x,"".concat(t,"/").concat(Object(J.a)())),e.next=4,Object(O.e)(c,n,"data_url");case 4:return a=e.sent,e.abrupt("return",Object(O.b)(a.ref));case 8:e.prev=8,e.t0=e.catch(0),console.log("imageFileUploadAndDownload err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(O.d)(x,"".concat(t,"/profileImage")),e.next=4,Object(O.e)(c,n,"data_url");case 4:return a=e.sent,e.next=7,Object(O.b)(a.ref);case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.log("sweets - profileImageFileUploadAndDownload err",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}(),$=function(e){return Object(O.a)(Object(O.d)(x,e))},H=function(e){return Object(f.e)(Object(f.f)(v,"sweets/".concat(e)))},Q=function(e,t,n){return e?Object(f.k)(Object(f.f)(v,"sweets/".concat(t)),{likes:Object(f.b)(n)}):Object(f.k)(Object(f.f)(v,"sweets/".concat(t)),{likes:Object(f.c)(n)})},Y=function(e,t){return Object(f.k)(Object(f.f)(v,"sweets/".concat(e)),{text:t})},ee=function(e,t){return Object(f.k)(Object(f.f)(v,"sweets/".concat(e)),{comments:Object(f.c)(t)})},te=function(e,t){return Object(f.k)(Object(f.f)(v,"sweets/".concat(e)),{comments:t})},ne=function(e,t){return Object(f.k)(Object(f.f)(v,"sweets/".concat(e.id)),{comments:e.comments.filter((function(e){return e.createdAt!==t}))})};var ce=function(e){var t=e.nestedComments,n=e.isOwner,c=e.handleAddNestedComment,a=e.handleDeleteNestedComment,o=_(),s=o.value,r=o.onChangeValue,i=o.onClearValue,l=function(e){e.preventDefault(),c(s,i)};return Object(y.jsxs)("div",{className:"nestedCommentsContainer",children:[Object(y.jsx)("form",{className:"commentForm",onSubmit:l,children:Object(y.jsxs)("div",{className:"commentInput__container",children:[Object(y.jsx)("input",{className:"commentInput__input",type:"text",name:"comment",value:s,onChange:r,placeholder:"\ub313\uae00 \ub2ec\uae30",required:!0}),Object(y.jsx)("input",{className:"commentInput__arrow",type:"submit",value:"\u2192",onSubmit:l})]})}),Object(y.jsx)("div",{className:"comments",children:null===t||void 0===t?void 0:t.map((function(e){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("span",{className:"dname",children:e.name||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:F(e.createdAt)})]}),n&&Object(y.jsx)("button",{className:"delcommentBtn",onClick:function(){return a(e.createdAt)},children:Object(y.jsx)(I.g,{})})]}),Object(y.jsx)("div",{className:"ctext",children:e.text})]},e.createdAt)}))})]})},ae=Object(c.createContext)(),oe=function(e){var t=e.children,n=Object(c.useState)({loading:!0,data:null,error:!1}),a=Object(r.a)(n,2),o=a[0],s=a[1],i=Object(c.useState)(),l=Object(r.a)(i,2),d=l[0],u=l[1];return Object(c.useEffect)((function(){var e,t;e=function(e){u(e.data())},t=function(e){console.log("fetchUsersProfilePhoto error",e)},Object(f.h)(Object(f.f)(v,"users","profilePhoto"),e,t),function(e,t){Object(f.h)(Object(f.f)(v,"users","profileData"),e,t)}((function(e){s((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,data:e.data()})}))}),(function(e){console.log("fetchUsersProfileData error",e),s((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))}))}),[]),Object(y.jsx)(ae.Provider,{value:{usersProfilePhoto:d,usersProfileData:o},children:t})};var se=function(e){var t=e.comments,n=e.comment,a=e.userObj,o=e.handleDeleteComment,s=q(),r=s.modal,i=s.handleModal,l=n.uid===a.uid,d=Object(c.useContext)(ae).usersProfileData.data,u=null===d||void 0===d?void 0:d[a.uid];return Object(y.jsxs)("div",{className:"comment",children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("span",{className:"dname",children:n.name||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:F(n.createdAt)})]}),l&&Object(y.jsx)("button",{className:"delcommentBtn",onClick:function(){return o(n.createdAt)},children:Object(y.jsx)(p.a,{icon:R.f})})]}),Object(y.jsx)("div",{className:"ctext",children:n.text}),Object(y.jsx)(z,{type:"comment",id:"id",likes:n.likes,liked:new Set(n.likes).has(a.uid),comments:n.nestedComments,handleLikeSweet:function(){var e=new Set(n.likes).has(a.uid),c=t.map((function(t){return t.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{likes:e?n.likes.filter((function(e){return e!==a.uid})):[].concat(Object(P.a)(n.likes),[a.uid])}):t}));te(n.id,c).then((function(t){console.log("handleLikeComment res",t),S(a.uid,Object(k.a)(Object(k.a)({},u),{},{likesSweets:e?u.likesSweets.filter((function(e){return e.id!==n.id})):[].concat(Object(P.a)(u.likesSweets),[n])})).then((function(e){console.log("updateProfileLikesComments res",e)})).catch((function(e){console.log("updateProfileLikesComments err",e)}))})).catch((function(e){console.log("handleLikeComment err",e)}))},handleAddComment:i}),r&&Object(y.jsx)(ce,{nestedComments:n.nestedComments.sort((function(e,t){return t.createdAt-e.createdAt})),isOwner:l,handleAddNestedComment:function(e,c){var o={commentId:n.createdAt,id:n.id,createdAt:Date.now(),uid:a.uid,name:a.displayName,text:e},s=t.map((function(e){return e.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{nestedComments:[].concat(Object(P.a)(n.nestedComments),[o])}):e}));te(n.id,s).then((function(e){c(),S(null===a||void 0===a?void 0:a.uid,Object(k.a)(Object(k.a)({},u),{},{commentedSweets:[].concat(Object(P.a)(u.commentedSweets),[o])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("updateSweetNestedComment err",e)}))},handleDeleteNestedComment:function(e){if(window.confirm("\ub2f5\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var c=t.map((function(t){return t.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{nestedComments:n.nestedComments.filter((function(t){return t.createdAt!==e}))}):t}));te(n.id,c).then((function(t){S(a.uid,Object(k.a)(Object(k.a)({},u),{},{commentedSweets:u.commentedSweets.filter((function(t){return t.createdAt!==e}))})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("deleteSweetNestedComment err",e)}))}}})]},n.createdAt)};var re=function(e){var t=e.handleAddComment,n=e.handleDeleteComment,c=e.comments,a=e.userObj,o=_(),s=o.value,r=o.onChangeValue,i=o.onClearValue,l=function(e){e.preventDefault(),t(s,i)};return Object(y.jsx)("div",{className:"comments-container",children:Object(y.jsxs)("div",{style:{marginTop:10},children:[Object(y.jsx)("form",{className:"commentForm",onSubmit:l,children:Object(y.jsxs)("div",{className:"commentInput__container",children:[Object(y.jsx)("input",{className:"commentInput__input",type:"text",name:"comment",value:s,onChange:r,placeholder:"\ub313\uae00 \ub2ec\uae30",required:!0}),Object(y.jsx)("input",{className:"commentInput__arrow",type:"submit",value:"\u2192",onSubmit:l})]})}),Object(y.jsx)("div",{className:"comments",children:null===c||void 0===c?void 0:c.map((function(e){return Object(y.jsx)(se,{comments:c,comment:e,userObj:a,handleDeleteComment:n},e.createdAt)}))})]})})},ie=function(e){var t=e.userObj,n=e.sweet,a=e.isOwner,o=e.darkMode,s=Object(l.g)(),i=n.comments.sort((function(e,t){return t.createdAt-e.createdAt})),d=Object(c.useState)(!1),u=Object(r.a)(d,2),j=u[0],b=u[1],m=Object(c.useState)(!1),f=Object(r.a)(m,2),O=f[0],h=f[1],v=Object(c.useContext)(ae),x=v.usersProfileData.data,p=v.usersProfilePhoto,g=null===x||void 0===x?void 0:x[null===n||void 0===n?void 0:n.creatorId],w=null===p||void 0===p?void 0:p[null===n||void 0===n?void 0:n.creatorId],N=function(e){e.target===e.currentTarget&&s.push("/sweet/".concat(null===n||void 0===n?void 0:n.id))};return Object(y.jsx)("div",{className:o?"sweet dark":"sweet",onClick:N,children:j?Object(y.jsx)(B,{text:n.text,onSubmit:function(e){Y(n.id,e).then((function(c){b(!1),S(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:g.likesSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),commentedSweets:g.commentedSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),writtenSweets:g.writtenSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t}))}))})).catch((function(e){console.log("updateSweet err",e)}))},closeEdit:function(){return b(!1)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("img",{alt:"profile",src:w||"".concat("/switter","/default-profile.png")}),Object(y.jsx)("span",{className:"dname",children:n.dName||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:F(n.createdAt)})]}),a&&Object(y.jsxs)("div",{className:"sweet__actions",children:[Object(y.jsx)("span",{onClick:function(){window.confirm("\uc2a4\uc717\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(""!==n.attachmentUrl&&$(n.attachmentUrl).catch((function(e){console.log("deleteStorageFile err",e)})),H(n.id).then((function(e){S(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:g.likesSweets.filter((function(e){return e.id!==n.id})),commentedSweets:g.commentedSweets.filter((function(e){return e.id!==n.id})),writtenSweets:g.writtenSweets.filter((function(e){return e.id!==n.id}))})).catch((function(e){console.log("updateUsersProfileData delComment err",e)}))})).catch((function(e){console.log("deleteSweet err",e)})))},children:Object(y.jsx)(I.h,{})}),Object(y.jsx)("span",{onClick:function(){return b((function(e){return!e}))},children:Object(y.jsx)(I.e,{})})]})]}),Object(y.jsx)("p",{className:"sweet__text",onClick:N,children:n.text}),n.attachmentUrl&&Object(y.jsx)("img",{alt:"img",src:n.attachmentUrl,onClick:N}),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(z,{type:"sweet",id:n.id,likes:n.likes,liked:new Set(n.likes).has(t.uid),comments:n.comments,handleLikeSweet:function(){var e=new Set(n.likes).has(t.uid);Q(e,n.id,t.uid).then((function(c){S(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:e?g.likesSweets.filter((function(e){return e.id!==n.id})):[].concat(Object(P.a)(g.likesSweets),[n])})).then((function(e){console.log("updateProfileLikesSweets res",e)})).catch((function(e){console.log("updateProfileLikesSweets err",e)}))})).catch((function(e){console.log("likeSweet err",e)}))},handleAddComment:function(){return h((function(e){return!e}))}}),O&&Object(y.jsx)(re,{handleAddComment:function(e,c){var a={id:n.id,uid:t.uid,createdAt:Date.now(),name:t.displayName,text:e,likes:[],nestedComments:[]};ee(n.id,a).then((function(e){c(),S(t.uid,Object(k.a)(Object(k.a)({},g),{},{commentedSweets:[].concat(Object(P.a)(g.commentedSweets),[a])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("addSweetComment err",e)}))},handleDeleteComment:function(e){window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&ne(n,e).then((function(n){S(t.uid,Object(k.a)(Object(k.a)({},g),{},{commentedSweets:g.commentedSweets.filter((function(t){return t.createdAt!==e})).filter((function(t){return t.commentId!==e}))})).then((function(e){console.log("updateUsersCommentedSweets delete res",e)})).catch((function(e){console.log("updateUsersCommentedSweets delete err",e)}))})).catch((function(e){return console.log("deleteSweetComment err",e)}))},comments:i,userObj:t})]})]})})},le=function(e){var t=e.userObj,n=e.darkMode,a=Object(c.useContext)(ae).usersProfileData.data,o=null===a||void 0===a?void 0:a[t.uid],s=_(""),r=s.value,i=s.onChangeValue,l=s.onClearValue,d=_(""),b=d.value,m=d.setValue,f=d.onClearValue,O=function(){var e=Object(j.a)(u.a.mark((function e(n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==r){e.next=3;break}return e.abrupt("return");case 3:if(c="",""===b){e.next=8;break}return e.next=7,W(t.uid,b);case 7:c=e.sent;case 8:a={text:r,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:c,dName:t.displayName,email:t.email,likes:[],comments:[]},Z(a).then((function(e){l(),f(),S(t.uid,Object(k.a)(Object(k.a)({},o),{},{writtenSweets:[].concat(Object(P.a)(o.writtenSweets),[Object(k.a)({id:e.id},a)])})).then((function(e){console.log("updateUserProfileArrData writtenSweets res",e)})).catch((function(e){console.log("updateUserProfileArrData writtenSweets err",e)}))})).catch((function(e){console.log("createSweet err",e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("form",{onSubmit:O,className:n?"factoryForm dark":"factoryForm",children:[Object(y.jsxs)("div",{className:"factoryInput__container",children:[Object(y.jsx)("input",{className:"factoryInput__input",value:r,onChange:i,type:"text",placeholder:"\ubb34\uc2a8 \ub2ec\ucf64\ud55c \uc0dd\uac01\uc744 \ud558\uace0 \uc788\ub098\uc694?",maxLength:120}),Object(y.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow",onSubmit:onsubmit})]}),Object(y.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(y.jsx)("span",{children:"\uc0ac\uc9c4 \uc120\ud0dd\ud558\uae30"}),Object(y.jsx)(p.a,{icon:R.e})]}),Object(y.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;m(t)},n.readAsDataURL(t)},style:{opacity:0}}),b&&Object(y.jsxs)("div",{className:"factoryForm__attachment",children:[Object(y.jsx)("img",{alt:"img",src:b,style:{backgroundImage:b}}),Object(y.jsxs)("div",{className:"factoryForm__clear",onClick:f,children:[Object(y.jsx)("span",{children:"\uc81c\uac70\ud558\uae30"}),Object(y.jsx)(p.a,{icon:R.f})]})]})]})};var de=function(){return Object(y.jsxs)("div",{className:"loading-component",children:[Object(y.jsx)("div",{className:"loading"}),Object(y.jsx)("p",{children:"loading..."})]})},ue={loading:!0,data:null,error:null};var je=function(e){var t=e.userObj,n=e.darkMode,a=Object(c.useState)(ue),o=Object(r.a)(a,2),s=o[0],i=o[1],l=s.loading,d=s.data;return s.error,Object(c.useEffect)((function(){return G((function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));i((function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:!1,data:t})}))}),(function(e){console.log("fetchSweets error",e),i((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))})),function(){G(),i(ue)}}),[]),l?Object(y.jsx)(de,{}):Object(y.jsxs)("div",{className:n?"container dark":"container",children:[Object(y.jsx)(le,{userObj:t,darkMode:n}),Object(y.jsx)("div",{className:"sweet-container",style:{marginTop:30},children:null===d||void 0===d?void 0:d.map((function(e){return Object(y.jsx)(ie,{userObj:t,sweet:e,isOwner:e.creatorId===t.uid,darkMode:n},e.id)}))})]})},be=function(e){var t=e.userObj,n=e.darkMode,c=e.onDarkMode;return Object(y.jsx)("nav",{className:n?"nav dark":"nav",children:Object(y.jsxs)("ul",{style:{display:"flex",justifyContent:"center"},children:[Object(y.jsx)("li",{className:"logo",children:Object(y.jsxs)(i.b,{to:"/",className:"navlink",activeClassName:"",children:[Object(y.jsx)(p.a,{icon:g.c,size:"2x"}),Object(y.jsx)("span",{children:"\u2665"})]})}),Object(y.jsx)("li",{className:"home",children:Object(y.jsxs)(i.b,{to:"/",className:"navlink",activeClassName:"",children:[Object(y.jsx)(p.a,{icon:R.c,size:"2x"}),Object(y.jsx)("span",{children:"home"})]})}),Object(y.jsx)("li",{className:"profile",children:Object(y.jsxs)(i.b,{className:"navlink",activeClassName:"",to:"/profile/".concat(t.uid),children:[Object(y.jsx)(p.a,{icon:R.g,size:"2x"}),Object(y.jsx)("span",{children:t.displayName||"\u2665"})]})}),Object(y.jsx)("li",{className:"msg",children:Object(y.jsxs)(i.b,{to:"/msg",className:"navlink",activeClassName:"active",children:[Object(y.jsx)(p.a,{icon:R.b,size:"2x"}),Object(y.jsx)("span",{children:"+1"})]})}),Object(y.jsxs)("li",{className:"dark navlink",onClick:c,children:[Object(y.jsx)(p.a,{icon:R.d,size:"2x",color:n?"#e9c77b":"#000000cc"}),Object(y.jsx)("span",{children:n?"light":"dark"})]}),Object(y.jsx)("li",{className:"more navlink",children:Object(y.jsx)(p.a,{icon:R.a,size:"2x"})})]})})},me=n(42);var fe=function(e){var t=e.photoURL,n=e.displayName,c=e.aboutMe,a=e.onSubmit,o=e.onCloseEdit,s=_(t),r=s.value,i=s.setValue,l=_(n),d=l.value,u=l.onChangeValue,j=_(c),b=j.value,m=j.onChangeValue,f=function(e){e.preventDefault(),a(r,d,b)};return Object(y.jsxs)("form",{onSubmit:f,children:[Object(y.jsxs)("div",{className:"editProfileImage",children:[Object(y.jsx)("img",{alt:"profile",className:"profileImage",src:r||"".concat("/switter","/default-profile.png")}),Object(y.jsx)("label",{htmlFor:"attach-file",className:"",children:Object(y.jsx)("span",{children:"\uc0ac\uc9c4 \uc120\ud0dd\ud558\uae30"})}),Object(y.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n&&void 0!==t&&null!==t&&(n.onload=function(e){var t=e.target.result;i(t)},n.readAsDataURL(t))},style:{display:"none",opacity:0}}),r!==t&&Object(y.jsx)("button",{className:"profileImgclearBtn",onClick:function(){return i(t)},children:Object(y.jsx)("span",{children:"\uc81c\uac70\ud558\uae30"})})]}),Object(y.jsx)("input",{onChange:u,type:"text",placeholder:"Display name",value:d||"",className:"formInput"}),Object(y.jsx)("input",{onChange:m,type:"text",placeholder:"About Me",value:b||"",className:"formInput aboutMeInput"}),Object(y.jsx)("input",{type:"submit",className:"formBtn updateProfileBtn",onClick:f,value:"\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8"}),Object(y.jsx)("input",{type:"button",className:"formBtn updateProfileBtn",onClick:o,style:{background:"rgba(177,151,252,0.6)"},value:"\ucde8\uc18c\ud558\uae30"})]})};var Oe=function(e){var t=e.message,n=void 0===t?"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4":t,c=Object(l.g)();return Object(y.jsxs)("div",{className:"notFound",children:[Object(y.jsx)("h1",{children:n}),Object(y.jsx)("button",{onClick:function(){return c.push("/")},children:"\ud648\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})},he=function(e){var t=e.children,n=document.getElementById("modal");return s.a.createPortal(t,n)};var ve=function(){var e=Object(c.useRef)(),t=Object(c.useContext)(xe),n=t.modal,a=t.modalContent,o=t.closeModal;return n?Object(y.jsx)(he,{children:Object(y.jsx)("div",{className:"modal-container",onClick:function(e){e.target===e.currentTarget&&o()},ref:e,children:Object(y.jsxs)("div",{className:"modal",children:[Object(y.jsx)("h1",{children:"Ooops"}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("button",{className:"closeBtn",onClick:function(){return o()},children:"\ub2eb\uae30"})]})})}):null},xe=Object(c.createContext)(),pe=function(e){var t=e.children,n=q(),c=n.modal,a=n.handleModal,o=n.openModal,s=n.closeModal,r=n.modalContent;return Object(y.jsxs)(xe.Provider,{value:{modal:c,handleModal:a,openModal:o,closeModal:s,modalContent:r},children:[Object(y.jsx)(ve,{}),t]})},ge=function(e){var t=e.refreshUser,n=e.userObj,a=e.darkMode,o=Object(l.h)(),s=Object(l.g)(),i=Object(c.useContext)(ae).usersProfileData,d=i.loading,b=i.data,m=i.error,f=null===b||void 0===b?void 0:b[o.uid||n.uid],O=Object(c.useState)(!1),v=Object(r.a)(O,2),x=v[0],p=v[1],g=n.uid===o.uid,w=Object(c.useContext)(xe).handleModal,M=function(){var e=Object(j.a)(u.a.mark((function e(c,a,o){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.displayName!==a||n.photoURL!==c||f.aboutMe!==o){e.next=3;break}return p(!1),e.abrupt("return");case 3:if(s="",""===c){e.next=8;break}return e.next=7,X(n.uid,c);case 7:s=e.sent;case 8:N({displayName:a,photoURL:s}).then((function(e){console.log("Profile update!",e),p(!1),t(),C(null===n||void 0===n?void 0:n.uid,s).catch((function(e){console.log("Profile - updateUsersProfilePhoto err",e)})),S(null===n||void 0===n?void 0:n.uid,Object(k.a)(Object(k.a)({},f),{},{displayName:a,aboutMe:o,photoURL:s})).catch((function(e){console.log("Profile - updateUsersProfileData err",e)}))})).catch((function(e){console.log("Profile update An error occurred",e),w("\ud68c\uc6d0\ub2d8\uc758 \ud504\ub85c\ud544\uc744 \uc5c5\ub370\uc774\ud2b8\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694")}));case 9:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return d?Object(y.jsx)(de,{}):f?m?Object(y.jsx)(Oe,{message:"\uc0ac\uc6a9\uc790\ub97c \uc870\ud68c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}):Object(y.jsx)("div",{className:a?"profileContainer dark":"profileContainer",children:Object(y.jsx)("div",{className:"profileInfoContainer",children:x?Object(y.jsx)(fe,{photoURL:null===f||void 0===f?void 0:f.photoURL,displayName:n.displayName,aboutMe:null===f||void 0===f?void 0:f.aboutMe,onSubmit:M,onCloseEdit:function(){return p(!1)}}):Object(y.jsxs)("div",{className:"profileInfo",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("img",{alt:"profile",className:"profileImage",src:(null===f||void 0===f?void 0:f.photoURL)||"".concat("/switter","/default-profile.png")}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{className:"dname",children:null===f||void 0===f?void 0:f.displayName}),Object(y.jsxs)("p",{className:"email",children:["@",null===f||void 0===f?void 0:f.email.split("@")[0]]})]}),Object(y.jsx)("p",{className:"aboutMe",children:null===f||void 0===f?void 0:f.aboutMe})]}),g&&Object(y.jsxs)("div",{className:"profileBtns",children:[Object(y.jsx)("button",{className:"profileEditButton",onClick:function(){return p(!0)},children:"\ud504\ub85c\ud544 \uc218\uc815"}),Object(y.jsx)("button",{className:"logoutBtn",onClick:function(){Object(me.h)(h),s.push("/")},children:"\ub85c\uadf8\uc544\uc6c3"})]})]})})}):Object(y.jsx)(Oe,{message:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc0ac\uc6a9\uc790\uc785\ub2c8\ub2e4"})},we=["\ub204\uad70\uac00\ub97c \uc0ac\ub791\ud558\uace0\uc790 \ud55c\ub2e4\uba74 \ub108 \uc790\uc2e0\uc744 \uba3c\uc800 \uc0ac\ub791\ud574\uc57c \ud574","\uc55e\uc774 \ubcf4\uc774\uc9c0 \uc54a\uc744 \ub54c\ub294 \uc9c0\uae08 \ud560 \uc218 \uc788\ub294 \uc77c\uc744 \ud558\uba74 \ub3fc","\uc9c4\uc815\ud55c \uc544\ub984\ub2e4\uc6c0\uc740 \ub0b4\uba74\uc5d0 \uc788\uc5b4","\uadf8\ub807\uac8c \uad6c\uacbd\ub9cc \ud558\ub2e4\uac00\ub294 \ub124 \uc778\uc0dd\uc774 \ub108 \uc5c6\uc774 \ud758\ub7ec\uac00\ub294 \uac78 \uad6c\uacbd\ud558\uac8c \ub420\uac78","\ub9c8\uc74c\ub9cc\uc744 \uac00\uc9c0\uace0 \uc788\uc5b4\uc11c\ub294 \uc548 \ub41c\ub2e4. \ubc18\ub4dc\uc2dc \uc2e4\ucc9c\ud574\uc57c \ud55c\ub2e4","\uc18c\uc2ec\ud574\uc9c8 \uc2dc\uac04 \uc5c6\uc5b4 \uc6a9\uac10\ud558\uace0 \ub300\ub2f4\ud558\uac8c \ud574","\uae30\uc5b5\ud574 \ub108\ub294 \uc138\uc0c1\uc744 \ube5b\uc73c\ub85c \uac00\ub4dd \ucc44\uc6b8 \uc218 \uc788\ub294 \uc874\uc7ac\ub780 \uac78","\uc0ac\ub791\uc740 \ub204\uad70\uac00\ub97c \ub098\ubcf4\ub2e4 \uba3c\uc800 \ub450\ub294 \uac70\uc57c","\uc6a9\uae30\ub97c \ub0b4","\ud589\uc6b4\uc744 \ube4c\uc5b4","\ub108\uc5d0\uac8c\ub294 \uc544\uc9c1 \uafc8\uc744 \uc774\ub8e8\uae30 \uc704\ud55c \ucda9\ubd84\ud55c \uc2dc\uac04\uc774 \uc788\uc5b4","\ud798\ub0b4. \uc778\uc0dd\uc740 \ud55c\uc21c\uac04\uc5d0 \ubc14\ub00c\uae30\ub3c4 \ud558\ub294 \uac70\ub2c8\uae4c","\ud070 \ud76c\ub9dd\uc774 \ud070 \uc0ac\ub78c\uc744 \ub9cc\ub4e0\ub2e4","\uac00\ub054\uc740 \uc633\uc740 \uae38\uc774 \uac00\uc7a5 \uc26c\uc6b4 \uae38\uc774 \uc544\ub2d0 \ub54c\ub3c4 \uc788\uc9c0","\uc808\ub300\ub85c \uace0\uac1c\ub97c \ub5a8\uad6c\uc9c0 \ub9d0\ub77c \uace0\uac1c\ub97c \uce58\ucf1c\ub4e4\uace0 \uc138\uc0c1\uc744 \ub611\ubc14\ub85c \ubcf4\ub77c","\uc2dc\uac04\uc740 \uc544\ubb34\ub3c4 \uae30\ub2e4\ub824\uc8fc\uc9c0 \uc54a\uc544","\uc544\ub984\ub2e4\uc6c0\uc740 \uc0ac\ub77c\uc838 \ubc84\ub9ac\uc9c0\ub9cc \ub9c8\uc74c\uc5d0\uc11c \uc6b0\ub7ec\ub098\ub294 \uac83\uc740 \uc0ac\ub77c\uc9c0\uc9c0 \uc54a\uc544. \uc720\uba38, \uce5c\uc808\ud568, \uc6a9\uae30","\uc911\uc694\ud55c \uac74 \uac89\ubaa8\uc2b5\uc774 \uc544\ub2cc \ub9c8\uc74c\uc774\uc57c","\uac04\uc808\ud788 \ubc14\ub77c\ub294 \ub9c8\uc74c\uc774 \uc788\uc5b4\uc57c \ub9c8\ubc95\uc774 \uc77c\uc5b4\ub0a0 \uc218 \uc788\uc5b4","\uc5ed\uacbd\uc744 \uc774\uaca8\ub0b4\uace0 \ud540 \uaf43\uc774 \uac00\uc7a5 \uc544\ub984\ub2e4\uc6b4 \uaf43\uc774\ub780\ub2e4","\ub208\uc744 \uac10\uc9c0 \ub9d0\uace0 \ub611\ubc14\ub85c \ubd10. \ub450\ub824\uc6c0\uc758 \uc2e4\uccb4\ub294 \uc0dd\uac01\uacfc \ub2e4\ub97c \uc218 \uc788\uc5b4","\uc80a\uac8c \uc0ac\ub294 \uac74 \uc808\ub300 \ub2a6\uc740 \ub098\uc774\ub780 \uc5c6\uc5b4","\ub110 \uc5b5\ub204\ub974\ub358 \uac83\ub4e4\uc774 \ub110 \uc77c\uc73c\ucf1c \uc904 \uac70\uc57c","\ud589\ubcf5\uc774 \ub124\uac00 \uc788\ub294 \uacf3\uc5d0 \uc788\ub2e4\ub294 \uac78 \uae68\ub2eb\uac8c \ub418\ub294 \ub0a0\uc774 \uc62c \uac70\uc57c","\ub204\uad6c\ub4e0 \ubb34\uc5c7\uc774\ub4e0 \ub420 \uc218 \uc788\uc5b4","\ub108\uc758 \uac00\uc871\uc774 \ub110 \uc5bc\ub9c8\ub098 \uc0ac\ub791\ud558\ub294\uc9c0 \uc78a\uc9c0 \ub9c8","\uc775\uc219\ud55c \uacf3\uc744 \ubc97\uc5b4\ub098\uc11c \ubaa8\ud5d8\ud574","\uc778\uc0dd\uc740 \uac00\ub2a5\uc131\uc73c\ub85c \uac00\ub4dd \ucc28 \uc788\uc5b4","\ub9e4\uc77c \ud589\ubcf5\ud560 \uc21c \uc5c6\uc9c0\ub9cc, \ud589\ubcf5\ud55c \uac83\ub4e4\uc740 \ub9e4\uc77c \uc788\uc5b4","\ucd5c\uace0\uc758 \uc21c\uac04\uc740 \uac11\uc790\uae30 \ucc3e\uc544\uc624\ub294 \uac70\uc57c"],ke=function(e){var t=e.userName,n=Object(c.useState)(!0),a=Object(r.a)(n,2),o=a[0],s=a[1],i=Object(c.useState)("".concat(t||"hey"," \ud074\ub9ad\ud574\ubd10 :)")),l=Object(r.a)(i,2),d=l[0],u=l[1],j=function(){return s(!o)};return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("div",{className:"msg-container",children:[Object(y.jsx)("div",{className:"msgh",children:Object(y.jsx)("span",{children:"Message"})}),o?Object(y.jsx)("div",{className:"msgs",onClick:j,children:Object(y.jsxs)("div",{className:"chat",children:[Object(y.jsxs)("div",{style:{fontWeight:"bold",marginBottom:12},children:[Object(y.jsx)(p.a,{icon:R.g})," ","\uc775\uba85"]}),Object(y.jsx)("span",{children:d})]})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"back",onClick:j,children:o?"":"\u2190"}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:20},children:[Object(y.jsx)("div",{style:{marginRight:10},children:Object(y.jsx)(p.a,{icon:R.g,color:"black"})}),Object(y.jsx)("div",{className:"mymsg",onClick:function(){return u(we[Math.floor(Math.random()*we.length)])},children:Object(y.jsx)("span",{children:d})})]})]})]})})},Ne=/[\s\uFEFF\xA0]+$/gi,Ce={loading:!0,data:null,error:null};var Se=function(e){var t,n,a,o=e.userObj,s=e.darkMode,i=Object(c.useState)(Ce),d=Object(r.a)(i,2),u=d[0],j=d[1],b=u.loading,m=u.data,f=(u.error,Object(c.useRef)()),O=Object(l.h)(),h=Object(l.g)(),v=Object(c.useState)(!1),x=Object(r.a)(v,2),p=x[0],g=x[1],w=T(f),N=Object(r.a)(w,2),C=N[0],M=N[1],U=(null===m||void 0===m?void 0:m.creatorId)===o.uid,D=Object(c.useContext)(ae),A=D.usersProfilePhoto,L=D.usersProfileData.data,F=null===L||void 0===L?void 0:L[null===o||void 0===o?void 0:o.uid];return Object(c.useEffect)((function(){return K(O.id,(function(e){j((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,data:e.data()})}))}),(function(e){console.log("fetchSweet error",e),j((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))})),function(){K(),j(Ce)}}),[O.id]),b?Object(y.jsx)(de,{}):m?Object(y.jsxs)("div",{className:s?"sweetDetailContainer dark":"sweetDetailContainer",children:[Object(y.jsxs)("div",{className:"sweetDetailTop",children:[Object(y.jsx)("button",{onClick:function(){return h.push("/")},children:"\u2190"}),"\uc2a4\ub808\ub4dc"]}),Object(y.jsxs)("div",{className:"sweetDetail",children:[p?Object(y.jsx)(B,{text:null===m||void 0===m?void 0:m.text,onSubmit:function(e){Y(null===O||void 0===O?void 0:O.id,e).then((function(t){g(!1),S(null===o||void 0===o?void 0:o.uid,Object(k.a)(Object(k.a)({},F),{},{likesSweets:F.likesSweets.map((function(t){return t.id===(null===O||void 0===O?void 0:O.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),commentedSweets:F.commentedSweets.map((function(t){return t.id===(null===O||void 0===O?void 0:O.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),writtenSweets:F.writtenSweets.map((function(t){return t.id===(null===O||void 0===O?void 0:O.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t}))}))})).catch((function(e){console.log("updateSweet err",e)}))},closeEdit:function(){return g(!1)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"sweetDetailTopInfo",onClick:function(){},children:[Object(y.jsxs)("div",{className:"userInfo",children:[Object(y.jsx)("img",{alt:"profile",className:"profile",src:A[m.creatorId]||"".concat("/switter","/default-profile.png")}),Object(y.jsxs)("div",{className:"text",children:[Object(y.jsx)("span",{className:"dname",children:(null===m||void 0===m?void 0:m.dName)||"\u2665"}),Object(y.jsxs)("span",{className:"email",children:["@",null===m||void 0===m||null===(t=m.email)||void 0===t?void 0:t.split("@")[0]]})]})]}),Object(y.jsx)("div",{className:"rightButtons",ref:f,children:U&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"rToggleBtn",onClick:M,children:Object(y.jsx)(I.b,{})}),C&&Object(y.jsxs)("div",{className:"buttons",children:[Object(y.jsxs)("button",{onClick:function(){window.confirm("\uc2a4\uc717\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(""!==(null===m||void 0===m?void 0:m.attachmentUrl)&&$(m.attachmentUrl).catch((function(e){console.log("deleteStorageFile err",e)})),H(null===O||void 0===O?void 0:O.id).then((function(e){h.goBack(),S(null===o||void 0===o?void 0:o.uid,Object(k.a)(Object(k.a)({},F),{},{likesSweets:F.likesSweets.filter((function(e){return e.id!==(null===O||void 0===O?void 0:O.id)})),commentedSweets:F.commentedSweets.filter((function(e){return e.id!==(null===O||void 0===O?void 0:O.id)})),writtenSweets:F.writtenSweets.filter((function(e){return e.id!==(null===O||void 0===O?void 0:O.id)}))})).catch((function(e){console.log("updateUsersProfileData delComment err",e)}))})).catch((function(e){console.log("deleteSweet err",e)})))},children:[Object(y.jsx)(I.h,{})," \uc0ad\uc81c\ud558\uae30"]}),Object(y.jsxs)("button",{onClick:function(){return g((function(e){return!e}))},children:[Object(y.jsx)(I.e,{})," \uc218\uc815\ud558\uae30"]})]})]})})]}),Object(y.jsx)("p",{className:"sweetDetailContent",children:null===m||void 0===m?void 0:m.text.replace(Ne,"")}),(null===m||void 0===m?void 0:m.attachmentUrl)&&Object(y.jsx)("img",{alt:"img",src:null===m||void 0===m?void 0:m.attachmentUrl})]}),Object(y.jsxs)("div",{className:"sweetDetailInfo",children:[Object(y.jsxs)("div",{className:"commentText",children:[Object(y.jsx)("span",{children:null===m||void 0===m||null===(n=m.comments)||void 0===n?void 0:n.length})," \ub2f5\uae00"]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:null===m||void 0===m||null===(a=m.likes)||void 0===a?void 0:a.length})," \ub9c8\uc74c\uc5d0 \ub4e4\uc5b4\uc694"]})]}),Object(y.jsx)(z,{type:"detail",id:O.id,likes:m.likes,liked:m.likes.includes(null===o||void 0===o?void 0:o.uid),comments:m.comments,handleLikeSweet:function(){var e=new Set(null===m||void 0===m?void 0:m.likes).has(null===o||void 0===o?void 0:o.uid);Q(e,null===O||void 0===O?void 0:O.id,null===o||void 0===o?void 0:o.uid).then((function(t){S(null===o||void 0===o?void 0:o.uid,Object(k.a)(Object(k.a)({},F),{},{likesSweets:e?F.likesSweets.filter((function(e){return e.id!==m.id})):[].concat(Object(P.a)(F.likesSweets),[m])})).then((function(e){console.log("updateProfileLikesSweets res",e)})).catch((function(e){console.log("updateProfileLikesSweets err",e)}))})).catch((function(e){console.log("likeSweet err",e)}))},handleAddComment:function(){}}),Object(y.jsx)(re,{handleAddComment:function(e,t){var n={id:O.id,uid:null===o||void 0===o?void 0:o.uid,createdAt:Date.now(),name:null===o||void 0===o?void 0:o.displayName,text:e,likes:[],nestedComments:[]};ee(O.id,n).then((function(e){t(),S(o.uid,Object(k.a)(Object(k.a)({},F),{},{commentedSweets:[].concat(Object(P.a)(F.commentedSweets),[n])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("addSweetComment err",e)}))},handleDeleteComment:function(e){window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&ne(Object(k.a)(Object(k.a)({},m),{},{id:null===O||void 0===O?void 0:O.id}),e).then((function(t){S(null===o||void 0===o?void 0:o.uid,Object(k.a)(Object(k.a)({},F),{},{commentedSweets:F.commentedSweets.filter((function(t){return t.createdAt!==e})).filter((function(t){return t.commentId!==e}))})).then((function(e){console.log("updateUsersCommentedSweets delete res",e)})).catch((function(e){console.log("updateUsersCommentedSweets delete err",e)}))})).catch((function(e){return console.log("deleteSweetComment err",e)}))},comments:null===m||void 0===m?void 0:m.comments.sort((function(e,t){return t.createdAt-e.createdAt})),userObj:o})]})]}):Object(y.jsx)(Oe,{message:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc2a4\uc717\uc785\ub2c8\ub2e4"})},ye=function(e){var t=e.refreshUser,n=e.isLoggedIn,c=e.userObj,a=e.darkMode,o=e.onDarkMode;return Object(y.jsx)(i.a,{children:Object(y.jsx)(l.d,{children:Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:a?"test dark":"test",children:[Object(y.jsx)("div",{className:a?"left dark":"left",children:n&&Object(y.jsx)(be,{userObj:c,darkMode:a,onDarkMode:o})}),n?Object(y.jsxs)("div",{className:a?"right dark":"right",children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(je,{userObj:c,darkMode:a,onDarkMode:o})}),Object(y.jsx)(l.b,{exact:!0,path:"/sweet/:id",children:Object(y.jsx)(Se,{userObj:c,darkMode:a})}),Object(y.jsx)(l.b,{exact:!0,path:"/profile/:uid",children:Object(y.jsx)(ge,{userObj:c,refreshUser:t,darkMode:a})}),Object(y.jsx)(l.b,{exact:!0,path:"/msg",children:Object(y.jsx)(ke,{userName:c.displayName})})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(A,{darkMode:a})}),Object(y.jsx)(l.a,{from:"*",to:"/"})]})]})})})})};var Me=function(){var e=Object(c.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(null),s=Object(r.a)(o,2),i=s[0],l=s[1],d=Object(c.useState)(!1),u=Object(r.a)(d,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){Object(m.e)(h,(function(e){l(e?{email:e.email,displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}}:null),a(!0)}))}),[]),Object(y.jsx)(oe,{children:Object(y.jsx)(pe,{children:n?Object(y.jsx)(ye,{refreshUser:function(){var e=h.currentUser;l({email:e.email,displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(i),userObj:i,darkMode:j,onDarkMode:function(){document.body.style=j?"background-color: #fff8e5":"background-color: #193446",b(!j)}}):Object(y.jsx)("div",{style:{marginTop:10},children:"Initializing...."})})})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),o(e),s(e)}))};n(71);s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(Me,{})}),document.getElementById("root")),Ue()}},[[72,1,2]]]);
//# sourceMappingURL=main.49f559d1.chunk.js.map