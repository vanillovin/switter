(this.webpackJsonpswitter=this.webpackJsonpswitter||[]).push([[0],{71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),s=n(43),i=n.n(s),o=n(13),r=n(32),l=n(19),d=n(1),u=n.n(d),j=n(2),b=n(54),m=n(26),O=n(14),f=n(34),h=(Object(b.a)({apiKey:"AIzaSyBOtqn8Rj-gLsv9CJm8F3dZKXyhey4x9Zw",authDomain:"switter-b2db8.firebaseapp.com",projectId:"switter-b2db8",storageBucket:"switter-b2db8.appspot.com",messagingSenderId:"132047093499",appId:"1:132047093499:web:315645c2fe687228ab3a5e"}),Object(m.d)()),x=Object(O.g)(),v=Object(f.c)(),p=n(20),g=n(39),w=n(6),k=n(12),N=function(e,t){return Object(O.h)(Object(O.f)(x,"users","profileData"),e,t)},S=function(e,t){var n=Object(O.d)(x,"users");return Object(O.k)(Object(O.f)(n,"profilePhoto"),Object(w.a)({},e,t))},C=function(e,t){var n=Object(O.d)(x,"users");return Object(O.k)(Object(O.f)(n,"profileData"),Object(w.a)({},e,t))},y=n(3),D="https://firebasestorage.googleapis.com/v0/b/switter-b2db8.appspot.com/o/logo.png?alt=media&token=d636781d-a94b-4b3f-8b18-374cceacf61d",A=function(e,t){return{email:e,aboutMe:"",displayName:"\u2665",photoURL:t,commentedSweets:[],writtenSweets:[],likesSweets:[]}},M=function(){var e=Object(c.useState)({email:"",password:""}),t=Object(o.a)(e,2),n=t[0],a=t[1],s=n.email,i=n.password,r=Object(c.useState)(""),l=Object(o.a)(r,2),d=l[0],b=l[1],O=Object(c.useState)(!0),f=Object(o.a)(O,2),x=f[0],v=f[1],p=function(e){var t=e.target,c=t.name,s=t.value;a(Object(k.a)(Object(k.a)({},n),{},Object(w.a)({},c,s)))},g=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!x){e.next=6;break}Object(m.c)(h,s,i).then((function(e){var t=e.user.uid;S(t,D).catch((function(e){console.log("updateUsersProfilePhoto err",e)})),C(t,A(s,D)).catch((function(e){return console.log("updateUsersProfileData err",e)}))})),e.next=9;break;case 6:return e.next=8,Object(m.f)(h,s,i);case 8:e.sent;case 9:e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("AuthForm onSubmit error :",e.t0,"error.message :",e.t0.message),b(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{onSubmit:g,className:"container",children:[Object(y.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:s,onChange:p,className:"authInput"}),Object(y.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:i,onChange:p,className:"authInput"}),Object(y.jsx)("input",{type:"submit",className:"authInput authSubmit",value:x?"\uac00\uc785\ud558\uae30":"\ub85c\uadf8\uc778"}),d&&Object(y.jsx)("span",{className:"authError",children:d})]}),Object(y.jsx)("span",{onClick:function(){v((function(e){return!e}))},className:"authSwitch",children:x?"\ub85c\uadf8\uc778\ud558\uae30":"\uc774\uba54\uc77c\ub85c \uac00\uc785\ud558\uae30"})]})},U=function(e){var t=e.darkMode,n=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.name,e.prev=1,"google"!==n){e.next=8;break}return c=new m.b,e.next=6,Object(m.g)(h,c);case 6:e.next=12;break;case 8:if("github"!==n){e.next=12;break}return c=new m.a,e.next=12,Object(m.g)(h,c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:t?"authContainer dark":"authContainer",children:[Object(y.jsx)(p.a,{icon:g.c,color:"#9775fa",size:"3x",style:{marginBottom:30}}),Object(y.jsx)(M,{}),Object(y.jsxs)("div",{className:"authBtns",children:[Object(y.jsxs)("button",{onClick:n,name:"google",className:"authBtn",children:["Google\ub85c \ub85c\uadf8\uc778"," ",Object(y.jsx)(p.a,{icon:g.b,color:"#fff",style:{marginLeft:2}})]}),Object(y.jsxs)("button",{onClick:n,name:"github",className:"authBtn",children:["Github\ub85c \ub85c\uadf8\uc778"," ",Object(y.jsx)(p.a,{icon:g.a,color:"#fff",style:{marginLeft:2}})]})]})]})},I=n(17),P=n(24),F=function(e,t){var n="https://vanillovin.github.io/switter";if("twitter"===e)window.open("https://twitter.com/intent/tweet?text=".concat("Switter","&url=").concat(n,"/%23/sweet/").concat(t),"popup\uc81c\ubaa9","width=500, height=400, scrollbars=yes");else{if("facebook"!==e)return;window.open("http://www.facebook.com/sharer/sharer.php?u=".concat(n,"/%23/sweet/").concat(t))}};function L(e){var t=(new Date-e)/1e3;if(t<60)return"\ubc29\uae08 \uc804";var n=t/60;if(n<60)return"".concat(Math.floor(n),"\ubd84 \uc804");var c=n/60;if(c<24)return"".concat(Math.floor(c),"\uc2dc\uac04 \uc804");var a=c/24;if(a<7)return"".concat(Math.floor(a),"\uc77c \uc804");var s=a/7;if(s<5)return"".concat(Math.floor(s),"\uc8fc \uc804");var i=a/30;if(i<12)return"".concat(Math.floor(i),"\uac1c\uc6d4 \uc804");var o=a/365;return"".concat(Math.floor(o),"\ub144 \uc804")}var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],s=n[1],i=function(e){return s(e.target.value)},r=function(){return s("")};return{value:a,setValue:function(e){return s(e)},onChangeValue:i,onClearValue:r}};var _=function(e){var t=e.text,n=e.onSubmit,c=e.closeEdit,a=B(t),s=a.value,i=a.onChangeValue;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("form",{className:"container sweetEdit",onSubmit:function(e){e.preventDefault(),n(s)},children:[Object(y.jsx)("textarea",{className:"formInput",type:"text",placeholder:"\uc2a4\uc717 \uc218\uc815\ud558\uae30",name:"sweet",required:!0,autoFocus:!0,value:s,onChange:i,maxLength:500}),Object(y.jsx)("input",{type:"submit",value:"\uc2a4\uc717 \uc5c5\ub370\uc774\ud2b8",className:"formBtn"})]}),Object(y.jsx)("button",{onClick:c,className:"formBtn cancelBtn",children:"\ucde8\uc18c"})]})},E=n(27),R=n(49),T=n(55);var V=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],s=n[1],i=function(t){var n;(null===(n=e.current)||void 0===n?void 0:n.contains(t.target))||s(!1)};return Object(c.useEffect)((function(){return a&&document.addEventListener("mousedown",i),function(){document.addEventListener("mousedown",i)}}),[a]),[a,function(){return s((function(e){return!e}))}]};var z=function(e){var t=e.type,n=e.id,a=e.likes,s=e.liked,i=e.comments,r=e.handleLikeSweet,l=e.handleAddComment,d=Object(c.useRef)(),u=V(d),j=Object(o.a)(u,2),b=j[0],m=j[1];return Object(y.jsxs)("div",{className:"bottom b".concat(t),children:[Object(y.jsx)("button",{title:"\ub9c8\uc74c\uc5d0 \ub4e4\uc5b4\uc694",onClick:r,children:"detail"!==t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(P.d,{color:s?"#e05d5d":""}),Object(y.jsx)("span",{children:" ".concat(a.length)})]}):s?Object(y.jsx)(R.a,{}):Object(y.jsx)(R.b,{})}),Object(y.jsxs)("button",{title:"\ub2f5\uae00",onClick:l,children:[Object(y.jsx)(P.a,{}),"detail"!==t&&Object(y.jsx)("span",{children:" ".concat(i.length)})]}),Object(y.jsxs)("div",{className:"toggles",ref:d,title:"\uacf5\uc720\ud558\uae30",children:[Object(y.jsx)("button",{className:"shareBtn",onClick:m,children:Object(y.jsx)(P.f,{})}),b&&Object(y.jsxs)("div",{title:"\ub9c1\ud06c \ubcf5\uc0ac\ud558\uae30",className:"buttons",children:[Object(y.jsxs)("button",{onClick:function(){return e=n,navigator.clipboard.writeText("https://vanillovin.github.io/switter/#/sweet/".concat(e)),void alert("\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac\ub410\uc2b5\ub2c8\ub2e4");var e},children:[Object(y.jsx)(T.a,{})," \uc2a4\uc717 \ub9c1\ud06c \ubcf5\uc0ac\ud558\uae30"]}),Object(y.jsxs)("button",{title:"\ud2b8\uc704\ud130\uc5d0 \uacf5\uc720\ud558\uae30",onClick:function(){return F("twitter",n)},children:[Object(y.jsx)(P.i,{})," \ud2b8\uc704\ud130\uc5d0 \uacf5\uc720\ud558\uae30"]}),Object(y.jsxs)("button",{title:"\ud398\uc774\uc2a4\ubd81\uc5d0 \uacf5\uc720\ud558\uae30",onClick:function(){return F("facebook",n)},children:[Object(y.jsx)(P.c,{})," \ud398\uc774\uc2a4\ubd81\uc5d0 \uacf5\uc720\ud558\uae30"]})]})]})]})},q=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)("im modal content"),i=Object(o.a)(s,2),r=i[0],l=i[1];return{modal:n,handleModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a((function(e){return!e})),e&&l(e)},openModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(!0),e&&l(e)},closeModal:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a(!1),e&&l(e)},modalContent:r}},J=n(74),G=function(e,t){return Object(O.h)(Object(O.j)(Object(O.d)(Object(O.g)(),"sweets"),Object(O.i)("createdAt","desc")),e,t)},K=function(e,t,n){return Object(O.h)(Object(O.f)(x,"sweets/".concat(e)),t,n)},Z=function(e){return Object(O.a)(Object(O.d)(x,"sweets"),e)},W=function(){var e=Object(j.a)(u.a.mark((function e(t,n){var c,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c=Object(f.d)(v,"".concat(t,"/").concat(Object(J.a)())),e.next=4,Object(f.e)(c,n,"data_url");case 4:return a=e.sent,e.abrupt("return",Object(f.b)(a.ref));case 8:e.prev=8,e.t0=e.catch(0),console.log("imageFileUploadAndDown err",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e){return Object(f.a)(Object(f.d)(v,e))},$=function(e){return Object(O.e)(Object(O.f)(x,"sweets/".concat(e)))},H=function(e,t,n){return e?Object(O.k)(Object(O.f)(x,"sweets/".concat(t)),{likes:Object(O.b)(n)}):Object(O.k)(Object(O.f)(x,"sweets/".concat(t)),{likes:Object(O.c)(n)})},Q=function(e,t){return Object(O.k)(Object(O.f)(x,"sweets/".concat(e)),{text:t})},Y=function(e,t){return Object(O.k)(Object(O.f)(x,"sweets/".concat(e)),{comments:Object(O.c)(t)})},ee=function(e,t){return Object(O.k)(Object(O.f)(x,"sweets/".concat(e)),{comments:t})},te=function(e,t){return Object(O.k)(Object(O.f)(x,"sweets/".concat(e.id)),{comments:e.comments.filter((function(e){return e.createdAt!==t}))})};var ne=function(e){var t=e.nestedComments,n=e.isOwner,c=e.handleAddNestedComment,a=e.handleDeleteNestedComment,s=B(),i=s.value,o=s.onChangeValue,r=s.onClearValue,l=function(e){e.preventDefault(),c(i,r)};return Object(y.jsxs)("div",{className:"nestedCommentsContainer",children:[Object(y.jsx)("form",{className:"commentForm",onSubmit:l,children:Object(y.jsxs)("div",{className:"commentInput__container",children:[Object(y.jsx)("input",{className:"commentInput__input",type:"text",name:"comment",value:i,onChange:o,placeholder:"\ub313\uae00 \ub2ec\uae30",required:!0}),Object(y.jsx)("input",{className:"commentInput__arrow",type:"submit",value:"\u2192",onSubmit:l})]})}),Object(y.jsx)("div",{className:"comments",children:null===t||void 0===t?void 0:t.map((function(e){return Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("span",{className:"dname",children:e.name||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:L(e.createdAt)})]}),n&&Object(y.jsx)("button",{className:"delcommentBtn",onClick:function(){return a(e.createdAt)},children:Object(y.jsx)(P.g,{})})]}),Object(y.jsx)("div",{className:"ctext",children:e.text})]},e.createdAt)}))})]})},ce=Object(c.createContext)(),ae=function(e){var t=e.children,n=Object(c.useState)(),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)(),l=Object(o.a)(r,2),d=l[0],u=l[1];return Object(c.useEffect)((function(){var e,t;e=function(e){u(e.data())},t=function(e){console.log("fetchUsersProfilePhoto error",e)},Object(O.h)(Object(O.f)(x,"users","profilePhoto"),e,t),N((function(e){i(e.data())}),(function(e){console.log("fetchUsersProfileData error",e)}))}),[]),Object(y.jsx)(ce.Provider,{value:{usersProfilePhoto:d,usersProfileData:s},children:t})};var se=function(e){var t=e.comments,n=e.comment,a=e.userObj,s=e.handleDeleteComment,i=q(),o=i.modal,r=i.handleModal,l=n.uid===a.uid,d=Object(c.useContext)(ce).usersProfileData[a.uid];return Object(y.jsxs)("div",{className:"comment",children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("span",{className:"dname",children:n.name||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:L(n.createdAt)})]}),l&&Object(y.jsx)("button",{className:"delcommentBtn",onClick:function(){return s(n.createdAt)},children:Object(y.jsx)(p.a,{icon:E.f})})]}),Object(y.jsx)("div",{className:"ctext",children:n.text}),Object(y.jsx)(z,{type:"comment",id:"id",likes:n.likes,liked:new Set(n.likes).has(a.uid),comments:n.nestedComments,handleLikeSweet:function(){var e=new Set(n.likes).has(a.uid),c=t.map((function(t){return t.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{likes:e?n.likes.filter((function(e){return e!==a.uid})):[].concat(Object(I.a)(n.likes),[a.uid])}):t}));ee(n.id,c).then((function(t){console.log("handleLikeComment res",t),C(a.uid,Object(k.a)(Object(k.a)({},d),{},{likesSweets:e?d.likesSweets.filter((function(e){return e.id!==n.id})):[].concat(Object(I.a)(d.likesSweets),[n])})).then((function(e){console.log("updateProfileLikesComments res",e)})).catch((function(e){console.log("updateProfileLikesComments err",e)}))})).catch((function(e){console.log("handleLikeComment err",e)}))},handleAddComment:r}),o&&Object(y.jsx)(ne,{nestedComments:n.nestedComments.sort((function(e,t){return t.createdAt-e.createdAt})),isOwner:l,handleAddNestedComment:function(e,c){var s={commentId:n.createdAt,id:n.id,createdAt:Date.now(),uid:a.uid,name:a.displayName,text:e},i=t.map((function(e){return e.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{nestedComments:[].concat(Object(I.a)(n.nestedComments),[s])}):e}));ee(n.id,i).then((function(e){c(),C(null===a||void 0===a?void 0:a.uid,Object(k.a)(Object(k.a)({},d),{},{commentedSweets:[].concat(Object(I.a)(d.commentedSweets),[s])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("updateSweetNestedComment err",e)}))},handleDeleteNestedComment:function(e){if(window.confirm("\ub2f5\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){var c=t.map((function(t){return t.createdAt===n.createdAt?Object(k.a)(Object(k.a)({},n),{},{nestedComments:n.nestedComments.filter((function(t){return t.createdAt!==e}))}):t}));ee(n.id,c).then((function(t){C(a.uid,Object(k.a)(Object(k.a)({},d),{},{commentedSweets:d.commentedSweets.filter((function(t){return t.createdAt!==e}))})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("deleteSweetNestedComment err",e)}))}}})]},n.createdAt)};var ie=function(e){var t=e.handleAddComment,n=e.handleDeleteComment,c=e.comments,a=e.userObj,s=B(),i=s.value,o=s.onChangeValue,r=s.onClearValue,l=function(e){e.preventDefault(),t(i,r)};return Object(y.jsx)("div",{className:"comments-container",children:Object(y.jsxs)("div",{style:{marginTop:10},children:[Object(y.jsx)("form",{className:"commentForm",onSubmit:l,children:Object(y.jsxs)("div",{className:"commentInput__container",children:[Object(y.jsx)("input",{className:"commentInput__input",type:"text",name:"comment",value:i,onChange:o,placeholder:"\ub313\uae00 \ub2ec\uae30",required:!0}),Object(y.jsx)("input",{className:"commentInput__arrow",type:"submit",value:"\u2192",onSubmit:l})]})}),Object(y.jsx)("div",{className:"comments",children:null===c||void 0===c?void 0:c.map((function(e){return Object(y.jsx)(se,{comments:c,comment:e,userObj:a,handleDeleteComment:n},e.createdAt)}))})]})})},oe=function(e){var t=e.userObj,n=e.sweet,a=e.isOwner,s=e.darkMode,i=Object(l.g)(),r=n.comments.sort((function(e,t){return t.createdAt-e.createdAt})),d=Object(c.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1],m=Object(c.useState)(!1),O=Object(o.a)(m,2),f=O[0],h=O[1],x=Object(c.useContext)(ce),v=x.usersProfileData,p=x.usersProfilePhoto,g=v[n.creatorId],w=p[n.creatorId],N=function(e){e.target===e.currentTarget&&i.push("/sweet/".concat(n.id))};return Object(y.jsx)("div",{className:s?"sweet dark":"sweet",onClick:N,children:j?Object(y.jsx)(_,{text:n.text,onSubmit:function(e){Q(n.id,e).then((function(c){b(!1),C(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:g.likesSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),commentedSweets:g.commentedSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),writtenSweets:g.writtenSweets.map((function(t){return t.id===n.id?Object(k.a)(Object(k.a)({},t),{},{text:e}):t}))}))})).catch((function(e){console.log("updateSweet err",e)}))},closeEdit:function(){return b(!1)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"hello",children:[Object(y.jsxs)("div",{className:"info",children:[Object(y.jsx)("img",{alt:"profile",src:w||"".concat("/switter","/default-profile.png")}),Object(y.jsx)("span",{className:"dname",children:n.dName||"\u2665"}),Object(y.jsx)("span",{className:"mini",children:L(n.createdAt)})]}),a&&Object(y.jsxs)("div",{className:"sweet__actions",children:[Object(y.jsx)("span",{onClick:function(){window.confirm("\uc2a4\uc717\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(""!==n.attachmentUrl&&X(n.attachmentUrl).catch((function(e){console.log("deleteStorageFile err",e)})),$(n.id).then((function(e){C(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:g.likesSweets.filter((function(e){return e.id!==n.id})),commentedSweets:g.commentedSweets.filter((function(e){return e.id!==n.id})),writtenSweets:g.writtenSweets.filter((function(e){return e.id!==n.id}))})).catch((function(e){console.log("updateUsersProfileData delComment err",e)}))})).catch((function(e){console.log("deleteSweet err",e)})))},children:Object(y.jsx)(P.h,{})}),Object(y.jsx)("span",{onClick:function(){return b((function(e){return!e}))},children:Object(y.jsx)(P.e,{})})]})]}),Object(y.jsx)("p",{className:"sweet__text",onClick:N,children:n.text}),n.attachmentUrl&&Object(y.jsx)("img",{alt:"img",src:n.attachmentUrl,onClick:N}),Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(z,{type:"sweet",id:n.id,likes:n.likes,liked:new Set(n.likes).has(t.uid),comments:n.comments,handleLikeSweet:function(){var e=new Set(n.likes).has(t.uid);H(e,n.id,t.uid).then((function(c){C(t.uid,Object(k.a)(Object(k.a)({},g),{},{likesSweets:e?g.likesSweets.filter((function(e){return e.id!==n.id})):[].concat(Object(I.a)(g.likesSweets),[n])})).then((function(e){console.log("updateProfileLikesSweets res",e)})).catch((function(e){console.log("updateProfileLikesSweets err",e)}))})).catch((function(e){console.log("likeSweet err",e)}))},handleAddComment:function(){return h((function(e){return!e}))}}),f&&Object(y.jsx)(ie,{handleAddComment:function(e,c){var a={id:n.id,uid:t.uid,createdAt:Date.now(),name:t.displayName,text:e,likes:[],nestedComments:[]};Y(n.id,a).then((function(e){c(),C(t.uid,Object(k.a)(Object(k.a)({},g),{},{commentedSweets:[].concat(Object(I.a)(g.commentedSweets),[a])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("addSweetComment err",e)}))},handleDeleteComment:function(e){window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&te(n,e).then((function(n){C(t.uid,Object(k.a)(Object(k.a)({},g),{},{commentedSweets:g.commentedSweets.filter((function(t){return t.createdAt!==e})).filter((function(t){return t.commentId!==e}))})).then((function(e){console.log("updateUsersCommentedSweets delete res",e)})).catch((function(e){console.log("updateUsersCommentedSweets delete err",e)}))})).catch((function(e){return console.log("deleteSweetComment err",e)}))},comments:r,userObj:t})]})]})})},re=function(e){var t=e.userObj,n=e.darkMode,a=Object(c.useContext)(ce).usersProfileData[t.uid],s=B(""),i=s.value,o=s.onChangeValue,r=s.onClearValue,l=B(""),d=l.value,b=l.setValue,m=l.onClearValue,O=function(){var e=Object(j.a)(u.a.mark((function e(n){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==i){e.next=3;break}return e.abrupt("return");case 3:if(c="",""===d){e.next=8;break}return e.next=7,W(t.uid,d);case 7:c=e.sent;case 8:s={text:i,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:c,dName:t.displayName,email:t.email,likes:[],comments:[]},Z(s).then((function(e){r(),m(),C(t.uid,Object(k.a)(Object(k.a)({},a),{},{writtenSweets:[].concat(Object(I.a)(a.writtenSweets),[Object(k.a)({id:e.id},s)])})).then((function(e){console.log("updateUserProfileArrData writtenSweets res",e)})).catch((function(e){console.log("updateUserProfileArrData writtenSweets err",e)}))})).catch((function(e){console.log("createSweet err",e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)("form",{onSubmit:O,className:n?"factoryForm dark":"factoryForm",children:[Object(y.jsxs)("div",{className:"factoryInput__container",children:[Object(y.jsx)("input",{className:"factoryInput__input",value:i,onChange:o,type:"text",placeholder:"\ubb34\uc2a8 \ub2ec\ucf64\ud55c \uc0dd\uac01\uc744 \ud558\uace0 \uc788\ub098\uc694?",maxLength:120}),Object(y.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow",onSubmit:onsubmit})]}),Object(y.jsxs)("label",{htmlFor:"attach-file",className:"factoryInput__label",children:[Object(y.jsx)("span",{children:"\uc0ac\uc9c4 \uc120\ud0dd\ud558\uae30"}),Object(y.jsx)(p.a,{icon:E.e})]}),Object(y.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;b(t)},n.readAsDataURL(t)},style:{opacity:0}}),d&&Object(y.jsxs)("div",{className:"factoryForm__attachment",children:[Object(y.jsx)("img",{alt:"img",src:d,style:{backgroundImage:d}}),Object(y.jsxs)("div",{className:"factoryForm__clear",onClick:m,children:[Object(y.jsx)("span",{children:"\uc81c\uac70\ud558\uae30"}),Object(y.jsx)(p.a,{icon:E.f})]})]})]})};var le=function(){return Object(y.jsxs)("div",{className:"loading-component",children:[Object(y.jsx)("div",{className:"loading"}),Object(y.jsx)("p",{children:"loading..."})]})},de={loading:!0,data:null,error:null};var ue=function(e){var t=e.userObj,n=e.darkMode,a=Object(c.useState)(de),s=Object(o.a)(a,2),i=s[0],r=s[1],l=i.loading,d=i.data;return i.error,Object(c.useEffect)((function(){return G((function(e){var t=e.docs.map((function(e){return Object(k.a)({id:e.id},e.data())}));r((function(e){return Object(k.a)(Object(k.a)({},e),{},{loading:!1,data:t})}))}),(function(e){console.log("fetchSweets error",e),r((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))})),function(){G(),r(de)}}),[]),l?Object(y.jsx)(le,{}):Object(y.jsxs)("div",{className:n?"container dark":"container",children:[Object(y.jsx)(re,{userObj:t,darkMode:n}),Object(y.jsx)("div",{className:"sweet-container",style:{marginTop:30},children:null===d||void 0===d?void 0:d.map((function(e){return Object(y.jsx)(oe,{userObj:t,sweet:e,isOwner:e.creatorId===t.uid,darkMode:n},e.id)}))})]})},je=function(e){var t=e.userObj,n=e.darkMode,c=e.onDarkMode;return Object(y.jsx)("nav",{className:n?"nav dark":"nav",children:Object(y.jsxs)("ul",{style:{display:"flex",justifyContent:"center"},children:[Object(y.jsx)("li",{className:"logo",children:Object(y.jsxs)(r.b,{to:"/",className:"navlink",activeClassName:"",children:[Object(y.jsx)(p.a,{icon:g.c,size:"2x"}),Object(y.jsx)("span",{children:"\u2665"})]})}),Object(y.jsx)("li",{className:"home",children:Object(y.jsxs)(r.b,{to:"/",className:"navlink",activeClassName:"",children:[Object(y.jsx)(p.a,{icon:E.c,size:"2x"}),Object(y.jsx)("span",{children:"home"})]})}),Object(y.jsx)("li",{className:"profile",children:Object(y.jsxs)(r.b,{className:"navlink",activeClassName:"",to:"/profile/".concat(t.uid),children:[Object(y.jsx)(p.a,{icon:E.g,size:"2x"}),Object(y.jsx)("span",{children:t.displayName||"\u2665"})]})}),Object(y.jsx)("li",{className:"msg",children:Object(y.jsxs)(r.b,{to:"/msg",className:"navlink",activeClassName:"active",children:[Object(y.jsx)(p.a,{icon:E.b,size:"2x"}),Object(y.jsx)("span",{children:"+1"})]})}),Object(y.jsxs)("li",{className:"dark navlink",onClick:c,children:[Object(y.jsx)(p.a,{icon:E.d,size:"2x",color:n?"#e9c77b":"#000000cc"}),Object(y.jsx)("span",{children:n?"light":"dark"})]}),Object(y.jsx)("li",{className:"more navlink",children:Object(y.jsx)(p.a,{icon:E.a,size:"2x"})})]})})},be=n(42);var me=function(e){var t=e.photoURL,n=e.displayName,a=e.onSubmit,s=e.onCloseEdit,i=Object(c.useState)(t),r=Object(o.a)(i,2),l=r[0],d=r[1],u=B(n),j=u.value,b=u.onChangeValue;return Object(y.jsxs)("form",{onSubmit:a,children:[Object(y.jsxs)("div",{className:"editProfileImage",children:[Object(y.jsx)("img",{alt:"profile",className:"profileImage",src:l||"".concat("/switter","/default-profile.png")}),Object(y.jsx)("label",{htmlFor:"attach-file",className:"",children:Object(y.jsx)("span",{children:"\uc0ac\uc9c4 \uc120\ud0dd\ud558\uae30"})}),Object(y.jsx)("input",{id:"attach-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;d(t)},n.readAsDataURL(t)},style:{display:"none",opacity:0}}),l!==t&&Object(y.jsx)("button",{className:"profileImgclearBtn",onClick:function(){return d(t)},children:Object(y.jsx)("span",{children:"\uc81c\uac70\ud558\uae30"})})]}),Object(y.jsx)("input",{onChange:b,type:"text",placeholder:"Display name",value:j||"",className:"formInput"}),Object(y.jsx)("input",{type:"submit",className:"formBtn updateProfileBtn",onClick:a,value:"\ud504\ub85c\ud544 \uc5c5\ub370\uc774\ud2b8"}),Object(y.jsx)("input",{type:"button",className:"formBtn updateProfileBtn",onClick:s,style:{background:"rgba(177,151,252,0.6)"},value:"\ucde8\uc18c\ud558\uae30"})]})};var Oe=function(e){var t=e.message,n=void 0===t?"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud398\uc774\uc9c0\uc785\ub2c8\ub2e4":t,c=Object(l.g)();return Object(y.jsxs)("div",{className:"notFound",children:[Object(y.jsx)("h1",{children:n}),Object(y.jsx)("button",{onClick:function(){return c.push("/")},children:"\ud648\uc73c\ub85c \ub3cc\uc544\uac00\uae30"})]})},fe=function(e){e.refreshUser;var t=e.userObj,n=e.darkMode,a=Object(l.h)(),s=Object(l.g)(),i=Object(c.useState)({lodaing:!0,data:null,error:null}),r=Object(o.a)(i,2),d=r[0],b=r[1],m=d.loading,O=d.data,f=(d.error,Object(c.useState)(!1)),x=Object(o.a)(f,2),v=x[0],p=x[1],g=t.uid===a.uid,w=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),p(!1);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return N((function(e){b((function(n){return Object(k.a)(Object(k.a)({},n),{},{loading:!1,data:e.data()[a.uid||t.uid]})}))}),(function(e){b((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))})),function(){N()}}),[a.uid,t.uid]),O?m?Object(y.jsx)(le,{}):Object(y.jsx)("div",{className:n?"profileContainer dark":"profileContainer",children:Object(y.jsx)("div",{className:"profileInfoContainer",children:v?Object(y.jsx)(me,{photoURL:t.photoURL,displayName:t.displayName,onSubmit:w,onCloseEdit:function(){return p(!1)}}):Object(y.jsxs)("div",{className:"profileInfo",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("img",{alt:"profile",className:"profileImage",src:(null===O||void 0===O?void 0:O.photoURL)||"".concat("/switter","/default-profile.png")}),Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{className:"dname",children:null===O||void 0===O?void 0:O.displayName}),Object(y.jsxs)("p",{className:"email",children:["@",null===O||void 0===O?void 0:O.email.split("@")[0]]})]}),Object(y.jsxs)("p",{className:"aboutMe",children:["aboutMe: ",null===O||void 0===O?void 0:O.aboutMe]})]}),g&&Object(y.jsxs)("div",{className:"profileBtns",children:[Object(y.jsx)("button",{className:"profileEditButton",onClick:function(){return p(!0)},children:"\ud504\ub85c\ud544 \uc218\uc815"}),Object(y.jsx)("button",{className:"logoutBtn",onClick:function(){Object(be.h)(h),s.push("/")},children:"\ub85c\uadf8\uc544\uc6c3"})]})]})})}):Object(y.jsx)(Oe,{message:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc0ac\uc6a9\uc790\uc785\ub2c8\ub2e4"})},he=["\ub204\uad70\uac00\ub97c \uc0ac\ub791\ud558\uace0\uc790 \ud55c\ub2e4\uba74 \ub108 \uc790\uc2e0\uc744 \uba3c\uc800 \uc0ac\ub791\ud574\uc57c \ud574","\uc55e\uc774 \ubcf4\uc774\uc9c0 \uc54a\uc744 \ub54c\ub294 \uc9c0\uae08 \ud560 \uc218 \uc788\ub294 \uc77c\uc744 \ud558\uba74 \ub3fc","\uc9c4\uc815\ud55c \uc544\ub984\ub2e4\uc6c0\uc740 \ub0b4\uba74\uc5d0 \uc788\uc5b4","\uadf8\ub807\uac8c \uad6c\uacbd\ub9cc \ud558\ub2e4\uac00\ub294 \ub124 \uc778\uc0dd\uc774 \ub108 \uc5c6\uc774 \ud758\ub7ec\uac00\ub294 \uac78 \uad6c\uacbd\ud558\uac8c \ub420\uac78","\ub9c8\uc74c\ub9cc\uc744 \uac00\uc9c0\uace0 \uc788\uc5b4\uc11c\ub294 \uc548 \ub41c\ub2e4. \ubc18\ub4dc\uc2dc \uc2e4\ucc9c\ud574\uc57c \ud55c\ub2e4","\uc18c\uc2ec\ud574\uc9c8 \uc2dc\uac04 \uc5c6\uc5b4 \uc6a9\uac10\ud558\uace0 \ub300\ub2f4\ud558\uac8c \ud574","\uae30\uc5b5\ud574 \ub108\ub294 \uc138\uc0c1\uc744 \ube5b\uc73c\ub85c \uac00\ub4dd \ucc44\uc6b8 \uc218 \uc788\ub294 \uc874\uc7ac\ub780 \uac78","\uc0ac\ub791\uc740 \ub204\uad70\uac00\ub97c \ub098\ubcf4\ub2e4 \uba3c\uc800 \ub450\ub294 \uac70\uc57c","\uc6a9\uae30\ub97c \ub0b4","\ud589\uc6b4\uc744 \ube4c\uc5b4","\ub108\uc5d0\uac8c\ub294 \uc544\uc9c1 \uafc8\uc744 \uc774\ub8e8\uae30 \uc704\ud55c \ucda9\ubd84\ud55c \uc2dc\uac04\uc774 \uc788\uc5b4","\ud798\ub0b4. \uc778\uc0dd\uc740 \ud55c\uc21c\uac04\uc5d0 \ubc14\ub00c\uae30\ub3c4 \ud558\ub294 \uac70\ub2c8\uae4c","\ud070 \ud76c\ub9dd\uc774 \ud070 \uc0ac\ub78c\uc744 \ub9cc\ub4e0\ub2e4","\uac00\ub054\uc740 \uc633\uc740 \uae38\uc774 \uac00\uc7a5 \uc26c\uc6b4 \uae38\uc774 \uc544\ub2d0 \ub54c\ub3c4 \uc788\uc9c0","\uc808\ub300\ub85c \uace0\uac1c\ub97c \ub5a8\uad6c\uc9c0 \ub9d0\ub77c \uace0\uac1c\ub97c \uce58\ucf1c\ub4e4\uace0 \uc138\uc0c1\uc744 \ub611\ubc14\ub85c \ubcf4\ub77c","\uc2dc\uac04\uc740 \uc544\ubb34\ub3c4 \uae30\ub2e4\ub824\uc8fc\uc9c0 \uc54a\uc544","\uc544\ub984\ub2e4\uc6c0\uc740 \uc0ac\ub77c\uc838 \ubc84\ub9ac\uc9c0\ub9cc \ub9c8\uc74c\uc5d0\uc11c \uc6b0\ub7ec\ub098\ub294 \uac83\uc740 \uc0ac\ub77c\uc9c0\uc9c0 \uc54a\uc544. \uc720\uba38, \uce5c\uc808\ud568, \uc6a9\uae30","\uc911\uc694\ud55c \uac74 \uac89\ubaa8\uc2b5\uc774 \uc544\ub2cc \ub9c8\uc74c\uc774\uc57c","\uac04\uc808\ud788 \ubc14\ub77c\ub294 \ub9c8\uc74c\uc774 \uc788\uc5b4\uc57c \ub9c8\ubc95\uc774 \uc77c\uc5b4\ub0a0 \uc218 \uc788\uc5b4","\uc5ed\uacbd\uc744 \uc774\uaca8\ub0b4\uace0 \ud540 \uaf43\uc774 \uac00\uc7a5 \uc544\ub984\ub2e4\uc6b4 \uaf43\uc774\ub780\ub2e4","\ub208\uc744 \uac10\uc9c0 \ub9d0\uace0 \ub611\ubc14\ub85c \ubd10. \ub450\ub824\uc6c0\uc758 \uc2e4\uccb4\ub294 \uc0dd\uac01\uacfc \ub2e4\ub97c \uc218 \uc788\uc5b4","\uc80a\uac8c \uc0ac\ub294 \uac74 \uc808\ub300 \ub2a6\uc740 \ub098\uc774\ub780 \uc5c6\uc5b4","\ub110 \uc5b5\ub204\ub974\ub358 \uac83\ub4e4\uc774 \ub110 \uc77c\uc73c\ucf1c \uc904 \uac70\uc57c","\ud589\ubcf5\uc774 \ub124\uac00 \uc788\ub294 \uacf3\uc5d0 \uc788\ub2e4\ub294 \uac78 \uae68\ub2eb\uac8c \ub418\ub294 \ub0a0\uc774 \uc62c \uac70\uc57c","\ub204\uad6c\ub4e0 \ubb34\uc5c7\uc774\ub4e0 \ub420 \uc218 \uc788\uc5b4","\ub108\uc758 \uac00\uc871\uc774 \ub110 \uc5bc\ub9c8\ub098 \uc0ac\ub791\ud558\ub294\uc9c0 \uc78a\uc9c0 \ub9c8","\uc775\uc219\ud55c \uacf3\uc744 \ubc97\uc5b4\ub098\uc11c \ubaa8\ud5d8\ud574","\uc778\uc0dd\uc740 \uac00\ub2a5\uc131\uc73c\ub85c \uac00\ub4dd \ucc28 \uc788\uc5b4","\ub9e4\uc77c \ud589\ubcf5\ud560 \uc21c \uc5c6\uc9c0\ub9cc, \ud589\ubcf5\ud55c \uac83\ub4e4\uc740 \ub9e4\uc77c \uc788\uc5b4","\ucd5c\uace0\uc758 \uc21c\uac04\uc740 \uac11\uc790\uae30 \ucc3e\uc544\uc624\ub294 \uac70\uc57c"],xe=function(e){var t=e.userName,n=Object(c.useState)(!0),a=Object(o.a)(n,2),s=a[0],i=a[1],r=Object(c.useState)("".concat(t||"hey"," \ud074\ub9ad\ud574\ubd10 :)")),l=Object(o.a)(r,2),d=l[0],u=l[1],j=function(){return i(!s)};return Object(y.jsx)("div",{className:"container",children:Object(y.jsxs)("div",{className:"msg-container",children:[Object(y.jsx)("div",{className:"msgh",children:Object(y.jsx)("span",{children:"Message"})}),s?Object(y.jsx)("div",{className:"msgs",onClick:j,children:Object(y.jsxs)("div",{className:"chat",children:[Object(y.jsxs)("div",{style:{fontWeight:"bold",marginBottom:12},children:[Object(y.jsx)(p.a,{icon:E.g})," ","\uc775\uba85"]}),Object(y.jsx)("span",{children:d})]})}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"back",onClick:j,children:s?"":"\u2190"}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:20},children:[Object(y.jsx)("div",{style:{marginRight:10},children:Object(y.jsx)(p.a,{icon:E.g,color:"black"})}),Object(y.jsx)("div",{className:"mymsg",onClick:function(){return u(he[Math.floor(Math.random()*he.length)])},children:Object(y.jsx)("span",{children:d})})]})]})]})})},ve=/[\s\uFEFF\xA0]+$/gi,pe={loading:!0,data:null,error:null};var ge=function(e){var t,n,a,s=e.userObj,i=e.darkMode,r=Object(c.useState)(pe),d=Object(o.a)(r,2),u=d[0],j=d[1],b=u.loading,m=u.data,O=(u.error,Object(c.useRef)()),f=Object(l.h)(),h=Object(l.g)(),x=Object(c.useState)(!1),v=Object(o.a)(x,2),p=v[0],g=v[1],w=V(O),N=Object(o.a)(w,2),S=N[0],D=N[1],A=(null===m||void 0===m?void 0:m.creatorId)===s.uid,M=Object(c.useContext)(ce),U=M.usersProfilePhoto,F=M.usersProfileData,L=null===F||void 0===F?void 0:F[null===s||void 0===s?void 0:s.uid];return Object(c.useEffect)((function(){return K(f.id,(function(e){j((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,data:e.data()})}))}),(function(e){console.log("fetchSweet error",e),j((function(t){return Object(k.a)(Object(k.a)({},t),{},{loading:!1,error:e})}))})),function(){K(),j(pe)}}),[f.id]),b?Object(y.jsx)(le,{}):m?Object(y.jsxs)("div",{className:i?"sweetDetailContainer dark":"sweetDetailContainer",children:[Object(y.jsxs)("div",{className:"sweetDetailTop",children:[Object(y.jsx)("button",{onClick:function(){return h.push("/")},children:"\u2190"}),"\uc2a4\ub808\ub4dc"]}),Object(y.jsxs)("div",{className:"sweetDetail",children:[p?Object(y.jsx)(_,{text:null===m||void 0===m?void 0:m.text,onSubmit:function(e){Q(null===f||void 0===f?void 0:f.id,e).then((function(t){g(!1),C(null===s||void 0===s?void 0:s.uid,Object(k.a)(Object(k.a)({},L),{},{likesSweets:L.likesSweets.map((function(t){return t.id===(null===f||void 0===f?void 0:f.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),commentedSweets:L.commentedSweets.map((function(t){return t.id===(null===f||void 0===f?void 0:f.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t})),writtenSweets:L.writtenSweets.map((function(t){return t.id===(null===f||void 0===f?void 0:f.id)?Object(k.a)(Object(k.a)({},t),{},{text:e}):t}))}))})).catch((function(e){console.log("updateSweet err",e)}))},closeEdit:function(){return g(!1)}}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("div",{className:"sweetDetailTopInfo",onClick:function(){},children:[Object(y.jsxs)("div",{className:"userInfo",children:[Object(y.jsx)("img",{alt:"profile",className:"profile",src:U[m.creatorId]||"".concat("/switter","/default-profile.png")}),Object(y.jsxs)("div",{className:"text",children:[Object(y.jsx)("span",{className:"dname",children:(null===m||void 0===m?void 0:m.dName)||"\u2665"}),Object(y.jsxs)("span",{className:"email",children:["@",null===m||void 0===m||null===(t=m.email)||void 0===t?void 0:t.split("@")[0]]})]})]}),Object(y.jsx)("div",{className:"rightButtons",ref:O,children:A&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{className:"rToggleBtn",onClick:D,children:Object(y.jsx)(P.b,{})}),S&&Object(y.jsxs)("div",{className:"buttons",children:[Object(y.jsxs)("button",{onClick:function(){window.confirm("\uc2a4\uc717\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(""!==(null===m||void 0===m?void 0:m.attachmentUrl)&&X(m.attachmentUrl).catch((function(e){console.log("deleteStorageFile err",e)})),$(null===f||void 0===f?void 0:f.id).then((function(e){h.goBack(),C(null===s||void 0===s?void 0:s.uid,Object(k.a)(Object(k.a)({},L),{},{likesSweets:L.likesSweets.filter((function(e){return e.id!==(null===f||void 0===f?void 0:f.id)})),commentedSweets:L.commentedSweets.filter((function(e){return e.id!==(null===f||void 0===f?void 0:f.id)})),writtenSweets:L.writtenSweets.filter((function(e){return e.id!==(null===f||void 0===f?void 0:f.id)}))})).catch((function(e){console.log("updateUsersProfileData delComment err",e)}))})).catch((function(e){console.log("deleteSweet err",e)})))},children:[Object(y.jsx)(P.h,{})," \uc0ad\uc81c\ud558\uae30"]}),Object(y.jsxs)("button",{onClick:function(){return g((function(e){return!e}))},children:[Object(y.jsx)(P.e,{})," \uc218\uc815\ud558\uae30"]})]})]})})]}),Object(y.jsx)("p",{className:"sweetDetailContent",children:null===m||void 0===m?void 0:m.text.replace(ve,"")}),(null===m||void 0===m?void 0:m.attachmentUrl)&&Object(y.jsx)("img",{alt:"img",src:null===m||void 0===m?void 0:m.attachmentUrl})]}),Object(y.jsxs)("div",{className:"sweetDetailInfo",children:[Object(y.jsxs)("div",{className:"commentText",children:[Object(y.jsx)("span",{children:null===m||void 0===m||null===(n=m.comments)||void 0===n?void 0:n.length})," \ub2f5\uae00"]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("span",{children:null===m||void 0===m||null===(a=m.likes)||void 0===a?void 0:a.length})," \ub9c8\uc74c\uc5d0 \ub4e4\uc5b4\uc694"]})]}),Object(y.jsx)(z,{type:"detail",id:f.id,likes:m.likes,liked:m.likes.includes(null===s||void 0===s?void 0:s.uid),comments:m.comments,handleLikeSweet:function(){var e=new Set(null===m||void 0===m?void 0:m.likes).has(null===s||void 0===s?void 0:s.uid);H(e,null===f||void 0===f?void 0:f.id,null===s||void 0===s?void 0:s.uid).then((function(t){C(null===s||void 0===s?void 0:s.uid,Object(k.a)(Object(k.a)({},L),{},{likesSweets:e?L.likesSweets.filter((function(e){return e.id!==m.id})):[].concat(Object(I.a)(L.likesSweets),[m])})).then((function(e){console.log("updateProfileLikesSweets res",e)})).catch((function(e){console.log("updateProfileLikesSweets err",e)}))})).catch((function(e){console.log("likeSweet err",e)}))},handleAddComment:function(){}}),Object(y.jsx)(ie,{handleAddComment:function(e,t){var n={id:f.id,uid:null===s||void 0===s?void 0:s.uid,createdAt:Date.now(),name:null===s||void 0===s?void 0:s.displayName,text:e,likes:[],nestedComments:[]};Y(f.id,n).then((function(e){t(),C(s.uid,Object(k.a)(Object(k.a)({},L),{},{commentedSweets:[].concat(Object(I.a)(L.commentedSweets),[n])})).then((function(e){console.log("updateUsersCommentedSweets res",e)})).catch((function(e){console.log("updateUsersCommentedSweets err",e)}))})).catch((function(e){console.log("addSweetComment err",e)}))},handleDeleteComment:function(e){window.confirm("\ub313\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&te(Object(k.a)(Object(k.a)({},m),{},{id:null===f||void 0===f?void 0:f.id}),e).then((function(t){C(null===s||void 0===s?void 0:s.uid,Object(k.a)(Object(k.a)({},L),{},{commentedSweets:L.commentedSweets.filter((function(t){return t.createdAt!==e})).filter((function(t){return t.commentId!==e}))})).then((function(e){console.log("updateUsersCommentedSweets delete res",e)})).catch((function(e){console.log("updateUsersCommentedSweets delete err",e)}))})).catch((function(e){return console.log("deleteSweetComment err",e)}))},comments:null===m||void 0===m?void 0:m.comments.sort((function(e,t){return t.createdAt-e.createdAt})),userObj:s})]})]}):Object(y.jsx)(Oe,{message:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uc2a4\uc717\uc785\ub2c8\ub2e4"})},we=function(e){var t=e.refreshUser,n=e.isLoggedIn,c=e.userObj,a=e.darkMode,s=e.onDarkMode;return Object(y.jsx)(r.a,{children:Object(y.jsx)(l.d,{children:Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:a?"test dark":"test",children:[Object(y.jsx)("div",{className:a?"left dark":"left",children:n&&Object(y.jsx)(je,{userObj:c,darkMode:a,onDarkMode:s})}),n?Object(y.jsxs)("div",{className:a?"right dark":"right",children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(ue,{userObj:c,darkMode:a,onDarkMode:s})}),Object(y.jsx)(l.b,{exact:!0,path:"/sweet/:id",children:Object(y.jsx)(ge,{userObj:c,darkMode:a})}),Object(y.jsx)(l.b,{exact:!0,path:"/profile/:uid",children:Object(y.jsx)(fe,{userObj:c,refreshUser:t,darkMode:a})}),Object(y.jsx)(l.b,{exact:!0,path:"/msg",children:Object(y.jsx)(xe,{userName:c.displayName})})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(l.b,{exact:!0,path:"/",children:Object(y.jsx)(U,{darkMode:a})}),Object(y.jsx)(l.a,{from:"*",to:"/"})]})]})})})})},ke=function(e){var t=e.children,n=document.getElementById("modal");return i.a.createPortal(t,n)};var Ne=function(){var e=Object(c.useRef)(),t=Object(c.useContext)(Se),n=t.modal,a=t.modalContent,s=t.closeModal;return n?Object(y.jsx)(ke,{children:Object(y.jsx)("div",{className:"modal-container",onClick:function(e){e.target===e.currentTarget&&s()},ref:e,children:Object(y.jsxs)("div",{className:"modal",children:[Object(y.jsx)("h1",{children:"Ooops"}),Object(y.jsx)("p",{children:a}),Object(y.jsx)("button",{className:"closeBtn",onClick:function(){return s()},children:"\ub2eb\uae30"})]})})}):null},Se=Object(c.createContext)(),Ce=function(e){var t=e.children,n=q(),c=n.modal,a=n.handleModal,s=n.openModal,i=n.closeModal,o=n.modalContent;return Object(y.jsxs)(Se.Provider,{value:{modal:c,handleModal:a,openModal:s,closeModal:i,modalContent:o},children:[Object(y.jsx)(Ne,{}),t]})};var ye=function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),i=Object(o.a)(s,2),r=i[0],l=i[1],d=Object(c.useState)(!1),u=Object(o.a)(d,2),j=u[0],b=u[1];return Object(c.useEffect)((function(){Object(m.e)(h,(function(e){l(e?{email:e.email,displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}}:null),a(!0)}))}),[]),Object(y.jsx)(ae,{children:Object(y.jsx)(Ce,{children:n?Object(y.jsx)(we,{refreshUser:function(){var e=h.currentUser;l({email:e.email,displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(r),userObj:r,darkMode:j,onDarkMode:function(){document.body.style=j?"background-color: #fff8e5":"background-color: #193446",b(!j)}}):Object(y.jsx)("div",{style:{marginTop:10},children:"Initializing...."})})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};n(71);i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(ye,{})}),document.getElementById("root")),De()}},[[72,1,2]]]);
//# sourceMappingURL=main.c50e9e39.chunk.js.map